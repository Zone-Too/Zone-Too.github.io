<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>自我介绍</title>
    <url>/2021/10/06/firstpage/</url>
    <content><![CDATA[<span id="more"></span>
<center> 姓名：杜宗原
<center> 性别：男
<center> 年龄：21岁
<center> 爱好：看电影]]></content>
      <categories>
        <category>生活</category>
      </categories>
      <tags>
        <tag>生活</tag>
      </tags>
  </entry>
  <entry>
    <title>分享一波壁纸</title>
    <url>/2021/10/06/testimage/</url>
    <content><![CDATA[<p>分享一波电脑壁纸吧</p>
<span id="more"></span>

<ul>
<li></li>
</ul>
<p><img src="01.jpeg" alt="image01"></p>
<ul>
<li></li>
</ul>
<p><img src="02.png" alt="image02"></p>
<ul>
<li></li>
</ul>
<p><img src="03.png" alt="image03"></p>
<ul>
<li></li>
</ul>
<p><img src="04.jpg" alt="image04"></p>
<ul>
<li></li>
</ul>
<p><img src="05.jpg" alt="image05"></p>
<ul>
<li></li>
</ul>
<p><img src="06.jpeg" alt="image06"></p>
<ul>
<li></li>
</ul>
<p><img src="07.jpeg" alt="image07"></p>
<ul>
<li></li>
</ul>
<p><img src="08.jpeg" alt="image08"></p>
<ul>
<li></li>
</ul>
<p><img src="09.jpeg" alt="image09"></p>
<ul>
<li></li>
</ul>
<p><img src="10.jpeg" alt="image10"></p>
<ul>
<li></li>
</ul>
<p><img src="11.jpeg" alt="image11"></p>
]]></content>
      <categories>
        <category>生活</category>
      </categories>
      <tags>
        <tag>壁纸</tag>
      </tags>
  </entry>
  <entry>
    <title>千词百练Unit6-10</title>
    <url>/2021/10/07/%E5%8D%83%E8%AF%8D%E7%99%BE%E7%BB%83002/</url>
    <content><![CDATA[<p>千词百练Unit6–10的生词</p>
<span id="more"></span>

<h3 id="Unit-6"><a href="#Unit-6" class="headerlink" title="Unit 6"></a>Unit 6</h3><p>1、<strong>contract</strong>  n.合同，契约；合同法，契约法；v.立法规定（或雇佣、承担、执行等）；订合同，订契约；</p>
<p>2、<strong>break / breach /violate a contract</strong>  违约，毁约</p>
<p>3、<strong>carry out /execute a contract</strong>  履行合同</p>
<p>4、<strong>cancel a contract</strong>  取消合同</p>
<p>5、<strong>prosecute</strong> v.起诉；告发；检举；彻底进行；执行</p>
<p>6、<strong>penalty</strong> n.处罚；刑罚；罚款； 罚球</p>
<p>7、<strong>penalize</strong> v.处罚；惩罚；（体育运动中的）判罚</p>
<p>8、<strong>death penalty</strong>  死刑</p>
<p>9、<strong>party</strong> n. （条约、诉讼、争论等中的）一方，当事人；党；党派；社会聚会</p>
<p>10、<strong>assume/shoulder/exercise the responsibility</strong>  承担责任</p>
<p>11、<strong>be responsible for</strong>  为…负责</p>
<p>12、<strong>entitlement</strong> n.（拥有某物或做某事的）权利，资格；有权得到的东西；征服津贴计划</p>
<p>13、<strong>entitle</strong> v.赋予…的权利，给…资格</p>
<p>14、<strong>oblige</strong> v.（以法律、义务等）强迫；迫使；施恩惠于，帮…的忙</p>
<p>15、<strong>obligation</strong> n.（法律上或道义上的）义务，责任</p>
<p>16、<strong>duration</strong> n.持久，持续；持续期间</p>
<p>17、<strong>durable</strong> adj.持久的；耐久的</p>
<h3 id="Unit-7"><a href="#Unit-7" class="headerlink" title="Unit 7"></a>Unit 7</h3><p>1、<strong>stock</strong>  n.（商店的）现货，存货，库存；储备物；股票；资本 v.存货；贮备</p>
<p>2、<strong>bond</strong>  n. 债券；契约，合同；票据，保证书</p>
<p>3、<strong>security</strong>  n. 证券</p>
<p>4、<strong>in stock</strong>  现货；有库存</p>
<p>5、<strong>out of stock</strong>  无现货的，脱销的</p>
<p>6、<strong>invest</strong>  v. 投资；耗资，投入</p>
<p>7、<strong>investment</strong>  n. 投资；投资额；（精力、思考、时间等的）投入</p>
<p>8、<strong>appreciate</strong>  v. 增值；感谢；赏识；欣赏；评价</p>
<p>9、<strong>depreciate</strong>  v. 贬值，跌价</p>
<p>10、<strong>appreciate at a steady rate</strong>  稳步升值</p>
<p>11、<strong>bubble</strong> n.冒泡；（欲表达的）一点感情；沸腾  v.冒泡，起泡，沸腾</p>
<p>12、<strong>bubble economy</strong>  泡沫经济</p>
<h3 id="Unit-8"><a href="#Unit-8" class="headerlink" title="Unit 8"></a>Unit 8</h3><p>1、<strong>postpone</strong>  v. 推迟</p>
<p>2、<strong>put off</strong>  推迟</p>
<p>3、<strong>call off</strong>  取消</p>
<p>4、<strong>accountable</strong>  adj. 负有责任的；可以解释的</p>
<p>5、<strong>transient</strong>  adj. 短暂的；转瞬即逝的；临时的</p>
<p>6、<strong>hinder</strong>  v.阻碍；妨碍  adj.后面的；在后的</p>
<p>7、<strong>hamper</strong>  v.阻碍；妨碍</p>
<p>8、<strong>hinder the progress</strong>  阻碍进步</p>
<p>9、<strong>substantial</strong>  adj.现实的；丰富的；可观的；大量的；实质的</p>
<p>10、<strong>be tie to</strong>  和…密切相关</p>
<p>11、<strong>be  related to</strong>  和…相关</p>
<h3 id="Unit-9"><a href="#Unit-9" class="headerlink" title="Unit 9"></a>Unit 9</h3><p>1、<strong>deposit</strong>  v.放置；存放；存储；使沉淀 n.存款；定金；押金</p>
<p>2、<strong>withdraw</strong>  v. 提，取（银行账号中的款）；收回；取回；撤销；撤退</p>
<p>3、<strong>transaction</strong> n. （一笔）交易；业务</p>
<p>4、<strong>prompt</strong>  v. 促使；导致；激起 adj. 立即；迅速的；及时的；准时的</p>
<p>5、<strong>promptly</strong>  adv. 立即；迅速地；准时地</p>
<h3 id="Unit-10"><a href="#Unit-10" class="headerlink" title="Unit 10"></a>Unit 10</h3><p>1、<strong>tariff</strong>  n. 关税</p>
<p>2、<strong>overrule</strong>  v. 推翻；否决；驳回</p>
<p>3、<strong>limitation</strong>  n. 限制；局限</p>
<p>4、<strong>limitless</strong>  adj. 无限的</p>
<p>5、<strong>limited</strong>  adj.有限的</p>
]]></content>
      <categories>
        <category>英语</category>
      </categories>
      <tags>
        <tag>千词百练</tag>
      </tags>
  </entry>
  <entry>
    <title>千词百练Unit1-5</title>
    <url>/2021/10/06/%E5%8D%83%E8%AF%8D%E7%99%BE%E7%BB%83Unit1-5/</url>
    <content><![CDATA[<p>千词百练Unit1–5的生词</p>
<span id="more"></span>

<h3 id="Unit-1"><a href="#Unit-1" class="headerlink" title="Unit 1"></a>Unit 1</h3><p>1、<strong>domestic</strong>  adj.国内的，家庭的</p>
<p>2、<strong>worsen</strong>  vi.恶化，使变得更坏</p>
<p>3、<strong>marco</strong>  adj.广大的，宏观的，大量的</p>
<p>4、<strong>avert</strong>  vt.避免</p>
<p>5、<strong>threat</strong>  n.威胁</p>
<p>6、<strong>at any rate/at all rates</strong>  无论如何；至少</p>
<p>7、<strong>overrate</strong>  v.高估</p>
<p>8、<strong>underrate</strong>  v.低估</p>
<p>9、<strong>depression</strong>  n.萧条期；经济衰退；沮丧；忧郁</p>
<p>10、<strong>stagnation</strong>  n.停滞；不发展</p>
<p>11、<strong>promote</strong>  v.促进</p>
<p>12、<strong>maintain</strong>  v.维持</p>
<h3 id="Unit-2"><a href="#Unit-2" class="headerlink" title="Unit 2"></a>Unit 2</h3><p>1、<strong>doom</strong>  n.厄运</p>
<p>2、<strong>dome</strong>  n.穹顶</p>
<p>3、<strong>thrive</strong>  v.兴旺；繁荣；蓬勃发展</p>
<p>4、<strong>prosperity</strong>  n.繁荣兴旺</p>
<p>5、<strong>recession</strong>  n.（经济的）衰退期；衰退</p>
<p>6、<strong>inflation</strong>  n.通货膨胀</p>
<p>7、<strong>deficit</strong>  n.赤字；不足；缺乏</p>
<p>8、<strong>fluctuation</strong>  n.波动</p>
<p>9、<strong>successive</strong>  adj.连续的</p>
<p>10、<strong>consession</strong>  n.妥协；让步</p>
<h3 id="Unit-3"><a href="#Unit-3" class="headerlink" title="Unit 3"></a>Unit 3</h3><p>1、<strong>enact</strong>  v.制定（法律）；规定；颁布；发布（法令、命令等）；担任…..角色</p>
<p>2、<strong>dispose</strong>  v.排列；布置；安排（事情）；处理（事务）</p>
<p>3、<strong>disposal</strong>  n.丢掉；丢弃；处理；解决</p>
<p>4、<strong>disposition</strong>  n.排列；部署；处理；性格</p>
<p>5、<strong>disposable</strong>  adj.可（任意）处理的；一次性的</p>
<p>6、<strong>enhance</strong>  v. 提高（价格、质量、吸引力等）；增加</p>
<p>7、<strong>strengthen</strong>  v.加强；巩固</p>
<p>8、<strong>consolidate</strong>  v.巩固；加强</p>
<p>9、<strong>acccelerate</strong>  v.加速；增速；促进</p>
<p>10、<strong>contribute to</strong>  有助于；促成</p>
<p>11、<strong>collective</strong>  adj.集体的；共同的</p>
<p>12、<strong>compensate</strong>  v.补偿；赔偿</p>
<p>13、<strong>compensate for</strong>  为……补偿</p>
<p>14、<strong>abound</strong>  v.大量存在</p>
<p>15、<strong>flourish</strong>  v.繁荣；兴旺</p>
<h3 id="Unit-4"><a href="#Unit-4" class="headerlink" title="Unit 4"></a>Unit 4</h3><p>1、<strong>commercial</strong>  adj.商业的</p>
<p>2、<strong>corporate</strong>  n.合伙公司</p>
<p>3、<strong>incorporate</strong>  v.合并；包含</p>
<p>4、<strong>cooperate</strong>  v.合作，协作</p>
<p>5、<strong>reputation</strong>  n.名誉；名声</p>
<p>6、<strong>reputable</strong>  n.名誉；名声</p>
<p>7、<strong>establish a good reputation</strong>  获得好名声</p>
<p>8、<strong>live up to its reputation</strong>  不负盛名，名不虚传</p>
<p>9、<strong>prestige</strong>  n.声望</p>
<p>10、<strong>malpractice</strong>  n.（利用职权）营私舞弊；玩忽职守</p>
<p>11、<strong>defame</strong>  v.诽谤；中伤</p>
<p>12、<strong>as matter of fact</strong>  事实上</p>
<p>13、<strong>affair</strong>  n.事情，事务；（个人的）事</p>
<p>14、<strong>no matter</strong>  无论……</p>
<h3 id="Unit-5"><a href="#Unit-5" class="headerlink" title="Unit 5"></a>Unit 5</h3><p>1、<strong>anniversary</strong>  n.周年纪念日</p>
<p>2、<strong>chronological</strong>  adj.按年月顺序排列</p>
<p>3、<strong>complain</strong>  v.抱怨；发牢骚</p>
<p>4、<strong>complaint</strong>  n.抱怨；诉苦</p>
<p>5、<strong>settle the date for the metting</strong>  确定召开会议的日期</p>
<p>6、<strong>settle the bill</strong>  付清账单</p>
<p>7、<strong>settle one’s nerves</strong>  是某人平静，是某人（精神)安定</p>
<p>8、<strong>settle down</strong> 定居；安家</p>
<p>9、<strong>settle for</strong> 勉强接受；将就</p>
<p>10、<strong>settle in</strong> (帮助……)适应（或习惯于）新环境（或新工作等）</p>
<p>11、<strong>settle on/upon</strong> 决定</p>
<p>12、<strong>settle up</strong> 付清；结清</p>
<p>13、<strong>numerous</strong>  adj.众多的；许多的</p>
<p>14、<strong>admit to</strong>  承认；通向</p>
<p>15、<strong>admission</strong>  n.允许进入；进入权</p>
<p>16、<strong>we have to admit that …</strong>  我们必须要承认…..</p>
<p>17、<strong>be admitted to the university</strong>  被大学录取</p>
]]></content>
      <categories>
        <category>英语</category>
      </categories>
      <tags>
        <tag>千词百练</tag>
      </tags>
  </entry>
  <entry>
    <title>千词百练Unit11-15</title>
    <url>/2021/10/15/%E5%8D%83%E8%AF%8D%E7%99%BE%E7%BB%83Unit11-15/</url>
    <content><![CDATA[<p>千词百练Unit11-15生词</p>
<span id="more"></span>

<h4 id="Unit11"><a href="#Unit11" class="headerlink" title="Unit11"></a>Unit11</h4><p>1、<strong>capitalism</strong>   n.资本主义（制度）</p>
<p>2、<strong>fund</strong>  n.资金（常用作复数）</p>
<p>3、<strong>collaborate</strong>  vi.协作，合作</p>
<p>4、<strong>stable</strong>   adj.稳定的，稳固的，固定的</p>
<p>5、<strong>fluctuate</strong>  v.波动，起伏，涨落</p>
<p>6、<strong>crash</strong>  n.破裂声，（飞机等）坠毁，破产，失败，v.（飞机）坠毁；（车辆）猛撞，失败；破产；死机</p>
<p>7、<strong>escalate</strong>  v.（工资、物价）逐步上升；逐步增强；（战斗）逐步升级</p>
<p>8、<strong>escalation</strong>  n. 逐步升级；逐步增强</p>
<h4 id="Unit12"><a href="#Unit12" class="headerlink" title="Unit12"></a>Unit12</h4><p>1、<strong>ascend</strong>  v.上升；登高</p>
<p>2、<strong>descend</strong>   v.下降</p>
<p>3、<strong>surge</strong>  v.(波涛等)汹涌；急剧上升；（价格、费用等）猛增</p>
<p>4、<strong>zoom</strong>  n.&amp;v. 急剧上升；（价格、费用）猛增</p>
<p>5、<strong>soar</strong>  v.高飞，翱翔</p>
<p>6、<strong>decline</strong>  v.下降；减少；倾斜 v. 拒绝；婉拒</p>
<p>7、<strong>decrease</strong>  v.减少，减小</p>
<p>8、<strong>descend</strong>   v.下降，缩减</p>
<p>9、<strong>diminish</strong>  v.减少，缩减</p>
<p>10、<strong>descend</strong> v.下降；下来；祖传</p>
<p>11、<strong>descendant</strong>  n.子孙，后代  adj.下降的；（从祖先）传下的</p>
<p>12、<strong>plunge</strong> v. (猛力)把…投入；暴跌；骤降</p>
<p>13、<strong>slump</strong> v.（物价等）下跌；（经济的等）衰落；（健康、质量等）下降 n.（沉重或突然）倒下；跌落；衰落；降低</p>
<p>14、<strong>remarkably</strong>  adv.明显地；引人注目地；非常地</p>
<p>15、<strong>remarkable</strong>  adj.值得注意的；引人注目的；非凡的</p>
<p>16、<strong>considerable</strong>  adj.重大的；相当大的</p>
<p>17、<strong>considerably</strong>  adv.相当大地；在很大程度上</p>
<p>18、<strong>dramatically</strong>  adv.戏剧性地；引人注目地；显著地</p>
<h4 id="Unit13"><a href="#Unit13" class="headerlink" title="Unit13"></a>Unit13</h4><p>1、<strong>resume</strong>  v.再继续；恢复  n.(求职者的)简历，履历；梗概，摘要</p>
<p>2、<strong>resumption</strong>  n.（中断后的）重新开始，继续</p>
<p>3、<strong>apply</strong>  v.(尤指以书面形式)申请；请求；应用；实施</p>
<p>4、<strong>applicable</strong>   adj.适当的</p>
<p>5、<strong>appliance</strong>  n.(家用的)电器，器具</p>
<p>6、<strong>application</strong>  n.申请</p>
<p>7、<strong>apply</strong> <strong>for</strong> 申请 </p>
<p>8、<strong>apply</strong> <strong>to</strong> 适用于</p>
<p>9、<strong>eligible</strong>  adj.有资格当选的；符合条件的</p>
<p>10、<strong>aligibility</strong>  n. 合格；中意、</p>
<p>11、<strong>employer</strong>  n.雇主</p>
<p>12、<strong>employee</strong>  n.雇员</p>
<p>13、<strong>revenue</strong>  n.收入；税收</p>
<p>14、<strong>bouns</strong>  n.奖金；红利</p>
<p>15、<strong>benefit</strong>  n. (生病、年老、事业等的)补助费，救济金；（公司的）奖金  n.益处，帮助  v.有益于</p>
<p>16、<strong>motivate</strong>  v.使有动机；激发；刺激</p>
<p>17、<strong>motivated</strong>  adj.有积极性的</p>
<p>18、<strong>motive</strong>  n.动机</p>
<p>19、<strong>motion</strong> n.运动</p>
<p>20、<strong>promote</strong>  v.提升，晋升；促进</p>
<p>21、<strong>promotion</strong>  n.提升；促进</p>
<p>22、<strong>sack</strong>  v.解雇</p>
<h4 id="Unit14"><a href="#Unit14" class="headerlink" title="Unit14"></a>Unit14</h4><p>1、<strong>recommend</strong>  v.推荐；介绍</p>
<p>2、<strong>recommendation</strong>  n.推荐</p>
<p>3、<strong>impressive</strong>  adj.给人印象深的；感人的</p>
<p>4、<strong>impress</strong>  v.印；盖（印、邮戳）于；给…留下好的印象；引人注目的</p>
<p>5、<strong>performance</strong>  n.表现；性能；工作情况；表演，演出; 履行；执行</p>
<p>6、<strong>perform</strong>  v.做；履行；演出</p>
<p>7、<strong>influence</strong>  n.&amp;v. 影响；作用； 支配</p>
<p>8、<strong>influential</strong>  a. 有影响的；有权势的</p>
<p>9、<strong>effect</strong> n.作用</p>
<p>10、<strong>impact</strong>  n. 影响，作用</p>
<p>11、<strong>have / exert/produce influence on/upon…</strong>  对…产生影响</p>
<p>12、<strong>talented</strong>  adj.有才干的</p>
<p>13、<strong>responsible</strong>  adj.需要负责任的</p>
<p>14、<strong>respond</strong>  v.回答；回应</p>
<p>15、<strong>in response to</strong> 作为对…的答复/反应</p>
<p>16、<strong>favour</strong>  n. 恩惠；帮助；好感；喜欢</p>
<p>16、<strong>favourable</strong>  adj.赞同的；有利的</p>
<p>17、<strong>in favour of</strong>  赞成，支持；有利于</p>
<h4 id="Unit15"><a href="#Unit15" class="headerlink" title="Unit15"></a>Unit15</h4><p>1、<strong>merge</strong>  v.(企业、团体等)合并，结合</p>
<p>2、<strong>merger</strong>  n. (企业、团体的)合并</p>
<p>3、<strong>submerge</strong>  v.淹没；浸没</p>
<p>4、<strong>emergent</strong>  adj.突然出现的；紧急的</p>
<p>5、<strong>monopoly</strong>  n.垄断；专卖；独有</p>
<p>6、<strong>manage</strong>  v.经营；管理</p>
<p>7、<strong>management</strong>  n. 经营；管理</p>
<p>8、<strong>manager</strong>  n. (企业、商店等)经理，经营者</p>
<p>9、<strong>innovation</strong>  n.改革，革新</p>
<p>10、<strong>novel</strong>  adj.新奇的</p>
<p>11、<strong>survive</strong>  v.存活；幸存；艰难度过；从（困境等）中挺过来</p>
<p>12、<strong>survival</strong>  n. 幸存；残存；幸存者</p>
<p>13、<strong>yield</strong>  n.产生（效果、收益等）；带来  v.产出（作物），产，出；屈服，投降</p>
<p>14、<strong>efficiency</strong>  n. 功率；效率</p>
<p>15、<strong>efficient</strong>  adj.效率高的；有效的</p>
<p>16、<strong>inefficiency</strong>  n.  无效率的</p>
<p>17、<strong>prospect</strong>  n. (经济、地位等的)前景，前程；预期；展望；景色</p>
]]></content>
      <categories>
        <category>英语</category>
      </categories>
      <tags>
        <tag>千词百练</tag>
      </tags>
  </entry>
  <entry>
    <title>Jsp课程设计（学生信息管理系统）</title>
    <url>/2021/10/25/Jsp%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1%EF%BC%88%E5%AD%A6%E7%94%9F%E4%BF%A1%E6%81%AF%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%EF%BC%89/</url>
    <content><![CDATA[<p>写在最前：该系统是一次课程设计，<strong>仅供参考</strong>。<strong>源码地址：</strong><a href="https://github.com/Zone-Too/Jspclasswork">Zone-Too/Jspclasswork (github.com)</a></p>
<span id="more"></span>

<h4 id="一、使用工具："><a href="#一、使用工具：" class="headerlink" title="一、使用工具："></a>一、使用工具：</h4><p><strong>jsp</strong> + <strong>JavaScript</strong> + <strong>servlet</strong> + <strong>Apache-Tomcat v9.0</strong> +  <strong>MySql</strong> + <strong>jdk13</strong> + <strong>ecplise</strong></p>
<h4 id="二、功能概述"><a href="#二、功能概述" class="headerlink" title="二、功能概述"></a>二、功能概述</h4><p>1、该项目为学生信息管理系统，首先要完成的功能是用户的<strong>注册</strong>、管理员的<strong>登录</strong>、管理员对用户数据的<strong>增删改查</strong>。</p>
<p>2、在登录页面上实现<strong>验证码登录</strong>功能</p>
<p>3、在管理员的运行界面以<strong>分页</strong>的形式显示所有的用户信息（代码过程中出现分页相关的知识，会放在文章后面着重解析）</p>
<p>4、实现全功能的<strong>模糊查询</strong></p>
<p>5、实现用户<strong>昵称相同，不可注册</strong></p>
<p>6、对程序各处进行优化处理，防止出现功能不全问题</p>
<h4 id="三、项目架构思路"><a href="#三、项目架构思路" class="headerlink" title="三、项目架构思路"></a>三、项目架构思路</h4><p>1、项目<strong>采用MVC架构</strong>，view层：jsp;  controller层：servlet；model层：dao；</p>
<p>2、<strong>运行的大体流程如下</strong>: 用户在jsp页面（view层）上提交申请到servlet（controller），servlet（controller）看是否需要与数据库进行交互，决定是否要进入Dao（model）层与数据库进行交互。Dao层处理完后，把数据返回给servlet进行下一把处理，处理完成后servlet把数据传给jsp页面（view层）进行显示。</p>
<h4 id="四、项目开发"><a href="#四、项目开发" class="headerlink" title="四、项目开发"></a>四、项目开发</h4><h5 id="1、项目创建"><a href="#1、项目创建" class="headerlink" title="1、项目创建"></a>1、项目创建</h5><p>​        使用ecplise，新建一个dynamic web project，命名为login。</p>
<p>​        用户对象的创建（User）</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.edu.ujn.model;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">	<span class="keyword">private</span> String username;</span><br><span class="line">	<span class="keyword">private</span> String password;</span><br><span class="line">	<span class="keyword">private</span> String sex;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">	<span class="keyword">private</span> String hobit;</span><br><span class="line">	<span class="keyword">private</span> String email;</span><br><span class="line">	<span class="keyword">private</span> String address;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getSex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> sex;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSex</span><span class="params">(String sex)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.sex = sex;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getHobit</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> hobit;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHobit</span><span class="params">(String hobit)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.hobit = hobit;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getEmail</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> email;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEmail</span><span class="params">(String email)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.email = email;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getAddress</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> address;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAddress</span><span class="params">(String address)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.address = address;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> id;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> username;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.username = username;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> password;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.password = password;</span><br><span class="line">	&#125;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2、注册的流程（register）"><a href="#2、注册的流程（register）" class="headerlink" title="2、注册的流程（register）"></a>2、注册的流程（register）</h5><p>​    2.1、View层的编写（register.jsp）：</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=utf-8&quot;</span> pageEncoding=<span class="string">&quot;utf-8&quot;</span>%&gt;`</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.util.Date&quot;</span> %&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;用户注册&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;!-- 表单验证 --&gt;</span><br><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">    <span class="comment">/*js判断输入框中是否填写东西，也可以使用 &lt;input/&gt; 的一个属性reqired来限制用户必须要进行输入*/</span></span><br><span class="line">	<span class="function">function <span class="title">check</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">var</span> inputdate = document.getElementById(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span>(inputdate.value==<span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">			alert(<span class="string">&quot;请输入注册的用户名&quot;</span>);</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		inputdate = document.getElementById(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span>(inputdate.value==<span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">			alert(<span class="string">&quot;请输入注册的密码&quot;</span>);</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		inputdate = document.getElementById(<span class="string">&quot;age&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span>(inputdate.value==<span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">			alert(<span class="string">&quot;请输入注册的年龄&quot;</span>);</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		inputdate = document.getElementById(<span class="string">&quot;email&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span>(inputdate.value==<span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">			alert(<span class="string">&quot;请输入注册的邮箱&quot;</span>);</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		inputdate = document.getElementById(<span class="string">&quot;address&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span>(inputdate.value==<span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">			alert(<span class="string">&quot;请输入注册的地址&quot;</span>);</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;form action=<span class="string">&quot;UserServlet?action=register&quot;</span> method=<span class="string">&quot;post&quot;</span> onsubmit=<span class="string">&quot;return check()&quot;</span>&gt;</span><br><span class="line">  	用户名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span> id =<span class="string">&quot;username&quot;</span>/&gt;&lt;br/&gt;&lt;br/&gt;</span><br><span class="line">  	密码：&lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;password&quot;</span> id =<span class="string">&quot;password&quot;</span>/&gt;&lt;br/&gt;&lt;br/&gt;</span><br><span class="line">  	性别：&lt;input type=<span class="string">&quot;radio&quot;</span> name =<span class="string">&quot;sex&quot;</span> value =<span class="string">&quot;男&quot;</span> &gt;男</span><br><span class="line">  		&lt;input type=<span class="string">&quot;radio&quot;</span> name =<span class="string">&quot;sex&quot;</span> value =<span class="string">&quot;女&quot;</span>&gt;女&lt;br/&gt;&lt;br/&gt;</span><br><span class="line">  	年龄：&lt;input type=<span class="string">&quot;text&quot;</span> name =<span class="string">&quot;age&quot;</span> id=<span class="string">&quot;age&quot;</span>&gt;&lt;br/&gt;&lt;br/&gt;</span><br><span class="line">  	爱好：&lt;input type =<span class="string">&quot;checkbox&quot;</span> name =<span class="string">&quot;hobit&quot;</span> value = <span class="string">&quot;看电影&quot;</span> &gt;看电影</span><br><span class="line">  		&lt;input type =<span class="string">&quot;checkbox&quot;</span> name =<span class="string">&quot;hobit&quot;</span> value = <span class="string">&quot;听音乐&quot;</span>&gt;听音乐</span><br><span class="line">  		&lt;input type =<span class="string">&quot;checkbox&quot;</span> name =<span class="string">&quot;hobit&quot;</span> value = <span class="string">&quot;读书&quot;</span>&gt;读书</span><br><span class="line">  		&lt;input type =<span class="string">&quot;checkbox&quot;</span> name =<span class="string">&quot;hobit&quot;</span> value = <span class="string">&quot;跑步&quot;</span>&gt;跑步&lt;br&gt;&lt;br&gt;</span><br><span class="line">  	邮箱：&lt;input type=<span class="string">&quot;email&quot;</span> name = <span class="string">&quot;email&quot;</span> id=<span class="string">&quot;email&quot;</span>&gt;&lt;br/&gt;&lt;br/&gt;</span><br><span class="line">  	家庭地址：&lt;input type =<span class="string">&quot;text&quot;</span> name =<span class="string">&quot;address&quot;</span> id = <span class="string">&quot;address&quot;</span>&gt;&lt;br/&gt;&lt;br/&gt;</span><br><span class="line">  	&lt;input type=<span class="string">&quot;submit&quot;</span> name=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;注册&quot;</span>/&gt;</span><br><span class="line">  &lt;/form&gt;&lt;br&gt;</span><br><span class="line">已经有账号了，点击&lt;a href=<span class="string">&quot;login.jsp&quot;</span>&gt;这里&lt;/a&gt;去登陆</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>​    2.2、Controller层的编写（servlet）：</p>
<p>​        首先在java resource的src下建立一个包，以反写域名的形式命名，如：cn.ujn.edu.servlet，在这个包下建立一个servlet类，命名为Userservlet。servlet中的doGet( ) 和 doPost( ) 分别用来处理以get方式和post方式提交的表单数据，所以一般情况下两个方法中实现的方法应该是一样的，故在dopost( )方法中调用doget( )方法。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">			<span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">//调用doGet()</span></span><br><span class="line">		doGet(request, response);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>​        doget( )：有些操作是要在所有页面都要共用的，比如中文乱码的解决，用户的用户名（username）、用户的密码（password）的获取、与数据库操作相关的dao层的建立以及表单action属性的获取（servlet通过 if 来判断action的值来判断具体要执行那一段代码，如register.jsp中form里的action值为register，后面servlet会调用register的相关方法【见后】）。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//解决中文乱码问题</span></span><br><span class="line">request.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">response.setContentType(<span class="string">&quot;text/html; charset=utf-8&quot;</span>);</span><br><span class="line"><span class="comment">//用户名和密码的获取</span></span><br><span class="line">String username = request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">String password = request.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"><span class="comment">//与数据库相关操作的Dao层的处理</span></span><br><span class="line">IUserDao userDao = <span class="keyword">new</span> UserDaoImpl();</span><br><span class="line"><span class="comment">//action属性的获取</span></span><br><span class="line">String action = request.getParameter(<span class="string">&quot;action&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>​          获取action的值为register之后的操作：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//对比action里的值为register执行if中的代码</span></span><br><span class="line"><span class="keyword">if</span> (action.equals(<span class="string">&quot;register&quot;</span>)) &#123;</span><br><span class="line">    <span class="comment">//获取表单中的数据（实际上是地址栏中的数据，只是post方法传输的，数据被隐藏了）。</span></span><br><span class="line">    <span class="comment">//以下性别、年龄、爱好、邮箱、地址都应该在register的方法中获取，因为其他页面的变淡不包括这些属性。</span></span><br><span class="line">			String sex = request.getParameter(<span class="string">&quot;sex&quot;</span>);</span><br><span class="line">			<span class="keyword">int</span> age = Integer.parseInt(request.getParameter(<span class="string">&quot;age&quot;</span>));</span><br><span class="line">			String[] hobits = request.getParameterValues(<span class="string">&quot;hobit&quot;</span>);</span><br><span class="line">			String hobit = <span class="string">&quot;&quot;</span>;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;hobits.length-<span class="number">1</span>; i++) &#123;</span><br><span class="line">				hobit = hobit + hobits[i] + <span class="string">&quot;,&quot;</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			hobit = hobit + hobits[hobits.length-<span class="number">1</span>];</span><br><span class="line">			String email = request.getParameter(<span class="string">&quot;email&quot;</span>);</span><br><span class="line">			String address = request.getParameter(<span class="string">&quot;address&quot;</span>);</span><br><span class="line">   	<span class="comment">//把获取到的数据存在一个user对象中，并把这个user对象作为参数传递给dao层的方法进行处理</span></span><br><span class="line">			User user = <span class="keyword">new</span> User();</span><br><span class="line">			user.setPassword(password);</span><br><span class="line">			user.setUsername(username);</span><br><span class="line">			user.setSex(sex);</span><br><span class="line">			user.setAge(age);</span><br><span class="line">			user.setHobit(hobit);</span><br><span class="line">			user.setEmail(email);</span><br><span class="line">			user.setAddress(address);</span><br><span class="line">    <span class="comment">//调用checkUsername()检查用户是否已经注册，已经注册了就不让再注册了</span></span><br><span class="line">			<span class="keyword">if</span> (userDao.checkUsername(user)) &#123;</span><br><span class="line">				response.getWriter().println(<span class="string">&quot;用户名已存在，即将为您重新跳转至登录册页面&quot;</span>);</span><br><span class="line">                <span class="comment">//用户已经注册了就跳转到login.jsp页面</span></span><br><span class="line">				response.setHeader(<span class="string">&quot;refresh&quot;</span>, <span class="string">&quot;3;url=login.jsp&quot;</span>);</span><br><span class="line">			&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//用户没有存在在数据库中，可以进行用户注册，执行以下代码</span></span><br><span class="line">				<span class="keyword">try</span> &#123;</span><br><span class="line">					<span class="keyword">if</span> (userDao.register(user)) &#123;</span><br><span class="line">						response.getWriter().println(<span class="string">&quot;注册成功，3秒后返回登录页面&quot;</span>);</span><br><span class="line">                        <span class="comment">//3秒钟跳转到login.jsp页面上</span></span><br><span class="line">						response.setHeader(<span class="string">&quot;refresh&quot;</span>, <span class="string">&quot;3;url=login.jsp&quot;</span>);</span><br><span class="line">					&#125; <span class="keyword">else</span></span><br><span class="line">                        <span class="comment">//在页面上显示一句话</span></span><br><span class="line">						response.getWriter().println(<span class="string">&quot;注册失败！&quot;</span>);</span><br><span class="line">				&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">					e.printStackTrace();</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br></pre></td></tr></table></figure>

<p>​         2.3、Model层的编写（Dao层）：</p>
<p>​            主要与数据可以打交道，由servlet调用</p>
<p>​     checkUsername( )：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">checkUsername</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//通过DBHelper建立一个与数据库的链接（DBHelper的使用见后）</span></span><br><span class="line">			Connection con = DBHelper.getConnection();</span><br><span class="line">            <span class="comment">//编写sql语句</span></span><br><span class="line">			String sql = <span class="string">&quot;select * from user where username=?&quot;</span>;</span><br><span class="line">            <span class="comment">//预处理sql语句</span></span><br><span class="line">			PreparedStatement st = con.prepareStatement(sql);</span><br><span class="line">            <span class="comment">//设置sql语句的的第一个？</span></span><br><span class="line">			st.setString(<span class="number">1</span>, user.getUsername());</span><br><span class="line">            <span class="comment">//执行sql语句，返回执行结果rs，用executeQuery()</span></span><br><span class="line">			ResultSet rs=st.executeQuery();</span><br><span class="line">			<span class="keyword">while</span>(rs.next()) &#123;</span><br><span class="line">                <span class="comment">//查找第一列的数据如果不为空，返回true，代表用户已经存在了</span></span><br><span class="line">				<span class="keyword">if</span> (rs.getString(<span class="number">1</span>)!=<span class="keyword">null</span>) &#123;</span><br><span class="line">					<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">                <span class="comment">//没有查找到同名的用户代表数据库没有这个人，可以进行注册，返回false</span></span><br><span class="line">				&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">					<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">            <span class="comment">//三个关闭</span></span><br><span class="line">			rs.close();</span><br><span class="line">			st.close();</span><br><span class="line">			con.close();</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception ce) &#123;</span><br><span class="line">			System.out.println(ce);</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>​         register( ):</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">register</span><span class="params">(User user)</span></span>&#123;</span><br><span class="line">	<span class="keyword">try</span> &#123;</span><br><span class="line">		Connection con = DBHelper.getConnection();</span><br><span class="line">		String sql = <span class="string">&quot;insert into user(username,password,sex,age,hobit,email,address) values(?,?,?,?,?,?,?)&quot;</span>;</span><br><span class="line">		PreparedStatement st = con.prepareStatement(sql);</span><br><span class="line">		st.setString(<span class="number">1</span>, user.getUsername());</span><br><span class="line">		st.setString(<span class="number">2</span>, user.getPassword());	</span><br><span class="line">		st.setString(<span class="number">3</span>, user.getSex());</span><br><span class="line">		st.setInt(<span class="number">4</span>, user.getAge());</span><br><span class="line">		st.setString(<span class="number">5</span>, user.getHobit());</span><br><span class="line">		st.setString(<span class="number">6</span>, user.getEmail());</span><br><span class="line">		st.setString(<span class="number">7</span>, user.getAddress());</span><br><span class="line"><span class="comment">//与查找不一样，更新、插入、删除都要用的是executeUpdate()，返回执行成功的条数</span></span><br><span class="line">		<span class="keyword">int</span> n = st.executeUpdate();</span><br><span class="line">		st.close();</span><br><span class="line">		con.close();</span><br><span class="line">		<span class="keyword">if</span> (n &gt; <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125; <span class="keyword">catch</span> (Exception ce) &#123;</span><br><span class="line">		System.out.println(ce);</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        随后register流程结束，通过response.setHeader(“refresh”, “3;url=login.jsp”);跳转到login.jsp页面，随后进入登录的MVC流程</p>
<h5 id="3、登录的流程（login）"><a href="#3、登录的流程（login）" class="headerlink" title="3、登录的流程（login）"></a>3、登录的流程（login）</h5><p>​        3.1、View层的编写（login.jsp）：</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;后台登陆界面&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">    <span class="comment">/*js判断输入框中是否填写东西，也可以使用 &lt;input/&gt; 的一个属性reqired来限制用户必须要进行输入*/</span></span><br><span class="line">	<span class="function">function <span class="title">check</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">var</span> inputdate = document.getElementById(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span>(inputdate.value==<span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">			alert(<span class="string">&quot;请输入名字&quot;</span>);</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		inputdate = document.getElementById(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span>(inputdate.value==<span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">			alert(<span class="string">&quot;请输入密码&quot;</span>);</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">/* 验证码的重新获取，onclick=&quot;reget(this)&quot;调用方法，重新获取验证图片 */</span></span><br><span class="line">	<span class="function">function <span class="title">reget</span><span class="params">(code)</span></span>&#123;</span><br><span class="line">		code.src=<span class="string">&quot;UserServlet?action=code&amp;time=&quot;</span> + <span class="keyword">new</span> Date().getTime();</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="comment">//pagesize 设置分页一页显示内容的多少</span></span><br><span class="line">	<span class="keyword">int</span> pagesize =<span class="number">7</span>;</span><br><span class="line">%&gt;</span><br><span class="line"> &lt;form action=<span class="string">&quot;UserServlet?action=login&amp;pagesize=&lt;%=pagesize %&gt;&quot;</span> method=<span class="string">&quot;post&quot;</span> onsubmit=<span class="string">&quot;return check()&quot;</span>&gt;</span><br><span class="line">  	用户名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span> id=<span class="string">&quot;username&quot;</span>/&gt;&lt;br/&gt;&lt;br/&gt;&lt;br&gt;</span><br><span class="line">  	密码：&lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;password&quot;</span> id=<span class="string">&quot;password&quot;</span> /&gt;&lt;br/&gt;&lt;br/&gt;</span><br><span class="line">  	&lt;label&gt; 验证码：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;checkcode&quot;</span> /&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;</span><br><span class="line">    &lt;!-- 验证码在页面上的获取方法 --&gt;</span><br><span class="line">  	&lt;img  src=<span class="string">&quot;UserServlet?action=code&quot;</span> onclick=<span class="string">&quot;reget(this)&quot;</span> width=100px height=35px  &gt;&lt;/label&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">  	&lt;input type=<span class="string">&quot;submit&quot;</span> name=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;登录&quot;</span>/&gt;</span><br><span class="line">  	&lt;input type=<span class="string">&quot;reset&quot;</span> value=<span class="string">&quot;重置&quot;</span> /&gt;</span><br><span class="line">  &lt;/form&gt;</span><br><span class="line">  &lt;br/&gt;&lt;br/&gt;</span><br><span class="line">    &lt;!-- 创建注册的链接，增加用户的体验 --&gt;</span><br><span class="line">  还没有账号？&amp;nbsp;点击&lt;a href=<span class="string">&quot;register.jsp&quot;</span>&gt;这里&lt;/a&gt;注册！</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>​        3.2、Controller层的编写（servlet）：</p>
<p>​        与register的流程类似，具体代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//对比action里的值为login执行if中的代码</span></span><br><span class="line"><span class="keyword">if</span> (action.equals(<span class="string">&quot;login&quot;</span>)) &#123;</span><br><span class="line">    <span class="comment">//获取到的username和password作为调用的dao层的方法的参数</span></span><br><span class="line">			User user=userDao.login(username, password);</span><br><span class="line">    <span class="comment">//获取pagesize，用于处理分页</span></span><br><span class="line">			String pagesize =request.getParameter(<span class="string">&quot;pagesize&quot;</span>);</span><br><span class="line">    <span class="comment">//从session中获取系统生成的验证码信息，并把session中获取的object转化为String</span></span><br><span class="line">			String picture_code = request.getSession().getAttribute(<span class="string">&quot;picture_code&quot;</span>).toString();</span><br><span class="line">    <span class="comment">//获取用户输入的验证码信息</span></span><br><span class="line">			String checkcode = request.getParameter(<span class="string">&quot;checkcode&quot;</span>);</span><br><span class="line">    <span class="comment">//验证用户是不是存在和输入的验证码是不是对的</span></span><br><span class="line">			<span class="keyword">if</span> (user != <span class="keyword">null</span> &amp;&amp; checkcode.equals(picture_code)) &#123;</span><br><span class="line">                <span class="comment">//用户登录成功后，把用户的名字存在session中</span></span><br><span class="line">				request.getSession().setAttribute(<span class="string">&quot;activeuser&quot;</span>, user.getUsername());</span><br><span class="line">                <span class="comment">//调用response.sendRedirect（）重定向到findall查询所有用户的信息</span></span><br><span class="line">				response.sendRedirect(<span class="string">&quot;UserServlet?action=findall&amp;pagesize=&quot;</span>+pagesize);</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				response.sendRedirect(<span class="string">&quot;login.jsp&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br></pre></td></tr></table></figure>

<p>​    验证码的生成代码：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 验证码</span></span><br><span class="line">		<span class="keyword">if</span> (action.equals(<span class="string">&quot;code&quot;</span>)) &#123;</span><br><span class="line">			<span class="comment">// BufferedImage类用来处理和操纵图像数据，所有 BufferedImage 对象的左上角坐标为（0,0）</span></span><br><span class="line">			<span class="comment">// 定义BufferedImage对象</span></span><br><span class="line">			BufferedImage bImage = <span class="keyword">new</span> BufferedImage(<span class="number">68</span>, <span class="number">22</span>, BufferedImage.TYPE_INT_RGB);<span class="comment">// 图像类型不透明</span></span><br><span class="line">			<span class="comment">// 获得Graphics对象</span></span><br><span class="line">			Graphics graphics = bImage.getGraphics();</span><br><span class="line">			<span class="comment">// 构建一个颜色</span></span><br><span class="line">			Color color = <span class="keyword">new</span> Color(<span class="number">200</span>, <span class="number">150</span>, <span class="number">255</span>);</span><br><span class="line">			<span class="comment">// 设置颜色</span></span><br><span class="line">			graphics.setColor(color);</span><br><span class="line">			<span class="comment">// 填充区域</span></span><br><span class="line">			graphics.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">68</span>, <span class="number">22</span>);</span><br><span class="line">			<span class="comment">// 定义一个数组来存放用来随机的字母和数字</span></span><br><span class="line">			<span class="keyword">char</span>[] ch = <span class="string">&quot;QWERTYUIOPLKJHGFDSAZXCVBNM0123456789&quot;</span>.toCharArray();</span><br><span class="line">			<span class="comment">// 定义一个随机对象</span></span><br><span class="line">			Random r = <span class="keyword">new</span> Random();</span><br><span class="line"></span><br><span class="line">			<span class="keyword">int</span> len = ch.length;</span><br><span class="line">			<span class="keyword">int</span> index;</span><br><span class="line">			String str = <span class="string">&quot;&quot;</span>;</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">				<span class="comment">// 产生一个随机数</span></span><br><span class="line">				index = r.nextInt(len);</span><br><span class="line">				<span class="comment">// 随机设置一个颜色,跟背景颜色相区别</span></span><br><span class="line">				graphics.setColor(<span class="keyword">new</span> Color(r.nextInt(<span class="number">88</span>), r.nextInt(<span class="number">188</span>), r.nextInt(<span class="number">255</span>)));</span><br><span class="line">				<span class="comment">// 使用Graphics绘制字符串</span></span><br><span class="line">				graphics.drawString(ch[index] + <span class="string">&quot;&quot;</span>, (i * <span class="number">15</span>) + <span class="number">5</span>, <span class="number">16</span>);</span><br><span class="line">				str += ch[index];</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">// 将验证码信息存入session中</span></span><br><span class="line">			request.getSession().setAttribute(<span class="string">&quot;picture_code&quot;</span>, str);</span><br><span class="line">			<span class="comment">// 使用ImageIO输出图片</span></span><br><span class="line">			ImageIO.write(bImage, <span class="string">&quot;JPG&quot;</span>, response.getOutputStream());</span><br><span class="line"></span><br><span class="line">		&#125;</span><br></pre></td></tr></table></figure>

<p>​     用户密码和验证码都通过了，随后再次进入servlet，action被赋值为finall，则会执行finall里面的代码：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//		查询所有信息</span></span><br><span class="line">		<span class="keyword">if</span>(action.equals(<span class="string">&quot;findall&quot;</span>)) &#123;</span><br><span class="line"><span class="comment">//      调用Dao层的方法findUsers（），查询所有的用户，则用一个链表来接收返回值，传入的数据，分别是分页的第一页和分页的每一页的内容多少（具体实现见后‘分页部分’）</span></span><br><span class="line">			ArrayList&lt;User&gt; userlist=userDao.findUsers(<span class="number">1</span>,Integer.parseInt(request.getParameter(<span class="string">&quot;pagesize&quot;</span>)));</span><br><span class="line"><span class="comment">//         把查询的用户链表存在request里，类似存在了一个内存中，只是这个请求结束后，这个内存也不存在了</span></span><br><span class="line">			request.setAttribute(<span class="string">&quot;userList&quot;</span>, userlist);</span><br><span class="line">            <span class="comment">//请求转发到success.jsp,通过下面这种方法，可以把request的数据传到下一个页面，即success.jsp页面</span></span><br><span class="line">			request.getRequestDispatcher(<span class="string">&quot;success.jsp&quot;</span>).forward(request, response);</span><br><span class="line">		&#125;</span><br></pre></td></tr></table></figure>

<p>​        3.3、Model层的编写（Dao层）</p>
<p>​    login（ ）:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">login</span><span class="params">(String username, String password)</span> </span>&#123;</span><br><span class="line">	User user = <span class="keyword">null</span>;</span><br><span class="line">	<span class="keyword">try</span> &#123;</span><br><span class="line">		Connection con = DBHelper.getConnection(); </span><br><span class="line">		String sql = <span class="string">&quot;select * from user where username=? and password=?&quot;</span>;</span><br><span class="line">		PreparedStatement st = con.prepareStatement(sql);</span><br><span class="line">		st.setString(<span class="number">1</span>, username);</span><br><span class="line">		st.setString(<span class="number">2</span>, password);</span><br><span class="line">           <span class="comment">//查询的执行语句是executeQuery()，返回的是查询的结果，不是执行成功的条数</span></span><br><span class="line">		ResultSet rs = st.executeQuery();</span><br><span class="line">		<span class="keyword">if</span> (rs.next()) &#123;</span><br><span class="line">			user = <span class="keyword">new</span> User();</span><br><span class="line">			user.setId(rs.getInt(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">			user.setUsername(rs.getString(<span class="string">&quot;username&quot;</span>));</span><br><span class="line">			user.setPassword(rs.getString(<span class="string">&quot;password&quot;</span>));</span><br><span class="line">			user.setSex(rs.getString(<span class="string">&quot;sex&quot;</span>));</span><br><span class="line">			user.setAge(rs.getInt(<span class="string">&quot;age&quot;</span>));</span><br><span class="line">			user.setHobit(rs.getString(<span class="string">&quot;hobit&quot;</span>));</span><br><span class="line">			user.setEmail (rs.getString(<span class="string">&quot;email&quot;</span>));</span><br><span class="line">			user.setAddress(rs.getString(<span class="string">&quot;address&quot;</span>));</span><br><span class="line">		&#125;</span><br><span class="line">		rs.close();</span><br><span class="line">		st.close();</span><br><span class="line">		con.close();</span><br><span class="line">		<span class="keyword">return</span> user;</span><br><span class="line">	&#125; <span class="keyword">catch</span> (Exception ce) &#123;</span><br><span class="line">		System.out.println(ce);</span><br><span class="line">		<span class="keyword">return</span> user;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>findUsers( )：</p>
<p>​        以分页的形式查询数据库中的信息</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ArrayList&lt;User&gt; <span class="title">findUsers</span><span class="params">(<span class="keyword">int</span> currentpage,<span class="keyword">int</span> pagesize)</span> </span>&#123;</span><br><span class="line">		User user = <span class="keyword">null</span>;</span><br><span class="line">		ArrayList&lt;User&gt; userList=<span class="keyword">new</span> ArrayList&lt;User&gt;();</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Connection con = DBHelper.getConnection(); </span><br><span class="line">			String sql = <span class="string">&quot;select * from user limit ?,?&quot;</span>;</span><br><span class="line">			PreparedStatement st = con.prepareStatement(sql);</span><br><span class="line">            <span class="comment">//(currentpage-1)*pagesize计算当前页第一位数据是列表中的第几条，用于分页</span></span><br><span class="line">			st.setInt(<span class="number">1</span>, (currentpage-<span class="number">1</span>)*pagesize);</span><br><span class="line">			st.setInt(<span class="number">2</span>, pagesize);</span><br><span class="line">			ResultSet rs = st.executeQuery();</span><br><span class="line">            <span class="comment">//多条数据用while</span></span><br><span class="line">			<span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">				user = <span class="keyword">new</span> User();</span><br><span class="line">				user.setId(rs.getInt(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">				user.setUsername(rs.getString(<span class="string">&quot;username&quot;</span>));</span><br><span class="line">				user.setPassword(rs.getString(<span class="string">&quot;password&quot;</span>));</span><br><span class="line">				user.setSex(rs.getString(<span class="string">&quot;sex&quot;</span>));</span><br><span class="line">				user.setAge(rs.getInt(<span class="string">&quot;age&quot;</span>));</span><br><span class="line">				user.setHobit(rs.getString(<span class="string">&quot;hobit&quot;</span>));</span><br><span class="line">				user.setEmail (rs.getString(<span class="string">&quot;email&quot;</span>));</span><br><span class="line">				user.setAddress(rs.getString(<span class="string">&quot;address&quot;</span>));</span><br><span class="line">                <span class="comment">//把查询到的每一位用户存在userlist里</span></span><br><span class="line">				userList.add(user);</span><br><span class="line">			&#125;</span><br><span class="line">			rs.close();</span><br><span class="line">			st.close();</span><br><span class="line">			con.close();</span><br><span class="line">			<span class="keyword">return</span> userList;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception ce) &#123;</span><br><span class="line">			System.out.println(ce);</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>​      3.4、View的展示（success.jsp）</p>
<p>​        该页面上实现了精准查询、模糊查询（源码中没有实现全局模糊查询，在文档中说明实现方法）、增加用户、修改用户、删除用户、以及个人页面的展示。</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=utf-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;utf-8&quot;</span>%&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.util.*&quot;</span> <span class="keyword">import</span>=<span class="string">&quot;cn.edu.ujn.model.User&quot;</span> <span class="keyword">import</span>=<span class="string">&quot;cn.edu.ujn.dao.IUserDao&quot;</span> <span class="keyword">import</span>=<span class="string">&quot;cn.edu.ujn.dao.UserDaoImpl&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;用户信息主界面&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">	<span class="function">function <span class="title">check</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">var</span> inputdate = document.getElementById(<span class="string">&quot;search-uid&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span>(inputdate.value==<span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">			alert(<span class="string">&quot;请输入你要查询的id&quot;</span>);</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function">function <span class="title">check2</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">var</span> inputdate = document.getElementById(<span class="string">&quot;search-uname&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span>(inputdate.value==<span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">			alert(<span class="string">&quot;请输入你要查询的字段&quot;</span>);</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">	&lt;%</span><br><span class="line">    <span class="comment">//有关当前页（currentpage）和页面条数（pagesize）的设置</span></span><br><span class="line">	<span class="keyword">int</span> currentpage=<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">int</span> pagesize = <span class="number">7</span>;</span><br><span class="line">	IUserDao userdao = <span class="keyword">new</span> UserDaoImpl();</span><br><span class="line">	<span class="keyword">int</span> pagecount = userdao.getPageCount(pagesize);</span><br><span class="line">	<span class="keyword">if</span>(request.getParameter(<span class="string">&quot;currentpage&quot;</span>)!=<span class="keyword">null</span>)&#123;</span><br><span class="line">		currentpage = Integer.parseInt(request.getParameter(<span class="string">&quot;currentpage&quot;</span>));</span><br><span class="line">		currentpage = currentpage&lt;<span class="number">1</span>?<span class="number">1</span>:currentpage;</span><br><span class="line">	&#125;</span><br><span class="line">	%&gt;</span><br><span class="line"></span><br><span class="line">	&lt;%</span><br><span class="line">    <span class="comment">//如果用户没有登陆则不能显示if里的语句（即显示页面），用来实现用户不登录不能打开除登录、注册以外的界面，这一段代码在很多地方都会用到，写法也一样。</span></span><br><span class="line">	<span class="keyword">if</span>(session.getAttribute(<span class="string">&quot;activeuser&quot;</span>) != <span class="keyword">null</span>)&#123;</span><br><span class="line">	out.println(session.getAttribute(<span class="string">&quot;activeuser&quot;</span>)+<span class="string">&quot;登录成功！&quot;</span>);	</span><br><span class="line">	ArrayList&lt;User&gt; userlist=(ArrayList&lt;User&gt;)request.getAttribute(<span class="string">&quot;userList&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span>(userlist!=<span class="keyword">null</span>&amp;&amp;userlist.size()&gt;<span class="number">0</span>)&#123; %&gt;</span><br><span class="line">		&lt;table border=<span class="string">&quot;1&quot;</span>&gt;</span><br><span class="line">			&lt;tr&gt;</span><br><span class="line">				&lt;th&gt;ID&lt;/th&gt;</span><br><span class="line">				&lt;th&gt;用户名&lt;/th&gt;</span><br><span class="line">				&lt;th&gt;密码&lt;/th&gt;</span><br><span class="line">				&lt;th&gt;性别&lt;/th&gt;</span><br><span class="line">				&lt;th&gt;年龄&lt;/th&gt;</span><br><span class="line">				&lt;th&gt;爱好&lt;/th&gt;</span><br><span class="line">				&lt;th&gt;邮箱&lt;/th&gt;</span><br><span class="line">				&lt;th&gt;地址&lt;/th&gt;</span><br><span class="line">				&lt;th&gt;操作&lt;/th&gt;</span><br><span class="line">			&lt;/tr&gt;</span><br><span class="line">			&lt;% <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;userlist.size();i++)&#123; %&gt;</span><br><span class="line">			&lt;tr&gt;</span><br><span class="line">			  &lt;td&gt;&lt;%=userlist.get(i).getId() %&gt;&lt;/td&gt;</span><br><span class="line">			  &lt;td&gt;&lt;a href = <span class="string">&quot;showoneuser.jsp?userid=&lt;%=userlist.get(i).getId() %&gt;&amp;pagesize=&lt;%=pagesize %&gt;&amp;currentpage=&lt;%=currentpage %&gt;&quot;</span>&gt;&lt;%=userlist.get(i).getUsername() %&gt;&lt;a/&gt;&lt;/td&gt;</span><br><span class="line">			  &lt;td&gt;&lt;%=userlist.get(i).getPassword() %&gt;&lt;/td&gt;</span><br><span class="line">			  &lt;td&gt;&lt;%=userlist.get(i).getSex() %&gt;&lt;/td&gt;</span><br><span class="line">			  &lt;td&gt;&lt;%=userlist.get(i).getAge() %&gt;&lt;/td&gt;</span><br><span class="line">			  &lt;td&gt;&lt;%=userlist.get(i).getHobit() %&gt;&lt;/td&gt;</span><br><span class="line">			  &lt;td&gt;&lt;%=userlist.get(i).getEmail() %&gt;&lt;/td&gt;</span><br><span class="line">			  &lt;td&gt;&lt;%=userlist.get(i).getAddress() %&gt;&lt;/td&gt;</span><br><span class="line">			  &lt;td&gt;&lt;a href = <span class="string">&quot;updateuser.jsp?userid=&lt;%=userlist.get(i).getId() %&gt;&amp;pagesize=&lt;%=pagesize %&gt;&amp;currentpage=&lt;%=currentpage %&gt;&quot;</span>&gt;修改用户&lt;/a&gt;&amp;nbsp;&amp;nbsp; &lt;a href =<span class="string">&quot;UserServlet?action=deleteoneuser&amp;userid=&lt;%=userlist.get(i).getId() %&gt;&amp;pagesize=&lt;%=pagesize %&gt;&amp;currentpage=&lt;%=currentpage %&gt;&quot;</span>&gt;删除用户&lt;/a&gt; &lt;/td&gt;</span><br><span class="line">			&lt;/tr&gt;</span><br><span class="line">		&lt;% &#125;</span><br><span class="line">     	%&gt;	&lt;br/&gt;&lt;br/&gt;</span><br><span class="line">     	&lt;a href = <span class="string">&quot;adduser.jsp?pagesize=&lt;%=pagesize %&gt;&amp;currentpage=&lt;%=pagecount %&gt;&quot;</span>&gt;添加一名用户&lt;/a&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">     	&lt;a href = <span class="string">&quot;logout.jsp&quot;</span>&gt;退出登录&lt;/a&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">     	&lt;form action=<span class="string">&quot;UserServlet?action=findoneuser&quot;</span> method=<span class="string">&quot;post&quot;</span> onsubmit=<span class="string">&quot;return check()&quot;</span>&gt;</span><br><span class="line">     	&lt;label&gt;请输入要查询的用户ID&lt;br&gt;&lt;br&gt;&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;userid&quot;</span> id=<span class="string">&quot;search-uid&quot;</span> /&gt;&lt;/label&gt;&amp;nbsp;</span><br><span class="line">     	&lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;准确查询&quot;</span> &gt;</span><br><span class="line">     	&lt;/form&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">     	</span><br><span class="line">     	&lt;form action=<span class="string">&quot;UserServlet?action=findsomeuser&quot;</span> method=<span class="string">&quot;post&quot;</span> onsubmit=<span class="string">&quot;return check2()&quot;</span>&gt;</span><br><span class="line">     	&lt;label&gt;请输入要查询的字段&lt;br&gt;&lt;br&gt;&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;userdate&quot;</span> id=<span class="string">&quot;search-uname&quot;</span>/&gt;&lt;/label&gt;&amp;nbsp;</span><br><span class="line">     	&lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;模糊查询&quot;</span> &gt;</span><br><span class="line">     	&lt;/form&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">		&lt;/table&gt;	</span><br><span class="line">		共&lt;%=pagecount %&gt;页，当前&lt;%=currentpage %&gt;/&lt;%=pagecount %&gt;页，&amp;nbsp;&amp;nbsp;</span><br><span class="line">		&lt;%<span class="keyword">if</span>(currentpage&lt;pagecount &amp;&amp; currentpage &gt;<span class="number">0</span>)&#123; %&gt;</span><br><span class="line">		&lt;a href =<span class="string">&quot;UserServlet?action=findallsub&amp;currentpage=&lt;%=currentpage - 1%&gt;&amp;pagesize=&lt;%=pagesize %&gt;&quot;</span>&gt;上一页&lt;/a&gt; &amp;nbsp;&lt;a href =<span class="string">&quot;UserServlet?action=findallsub&amp;currentpage=&lt;%=currentpage + 1%&gt;&amp;pagesize=&lt;%=pagesize %&gt;&quot;</span>&gt;下一页&lt;/a&gt;</span><br><span class="line">	&lt;%&#125;<span class="keyword">else</span> <span class="keyword">if</span>(currentpage&gt;=pagecount)&#123; %&gt;</span><br><span class="line">		&lt;a href =<span class="string">&quot;UserServlet?action=findallsub&amp;currentpage=&lt;%=currentpage - 1%&gt;&amp;pagesize=&lt;%=pagesize %&gt;&quot;</span>&gt;上一页&lt;/a&gt; &amp;nbsp;&lt;a href =<span class="string">&quot;UserServlet?action=findallsub&amp;currentpage=&lt;%=pagecount %&gt;&amp;pagesize=&lt;%=pagesize %&gt;&quot;</span>&gt;下一页&lt;/a&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;% &#125;</span><br><span class="line">	&#125;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;%&gt; </span><br><span class="line">		还没登录呢，请先去&lt;a href=<span class="string">&quot;login.jsp&quot;</span>&gt;登录&lt;/a&gt;。</span><br><span class="line">	&lt;%&#125;</span><br><span class="line">	%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h5 id="4、修改用户的流程"><a href="#4、修改用户的流程" class="headerlink" title="4、修改用户的流程"></a>4、修改用户的流程</h5><p>​            用户登陆后，在主界面（success.jsp）的操作栏里，点击修改用户的超连接后，会跳转到updatauser.jsp页面上，随后进入增加用户的MVC的流程。</p>
<p>​            4.1、修改用户的view层（updateuser.jsp）：</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=utf-8&quot;</span></span><br><span class="line">	pageEncoding=<span class="string">&quot;utf-8&quot;</span>%&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.util.*&quot;</span> <span class="keyword">import</span>=<span class="string">&quot;cn.edu.ujn.model.User&quot;</span></span><br><span class="line">	<span class="keyword">import</span>=<span class="string">&quot;cn.edu.ujn.dao.IUserDao&quot;</span> <span class="keyword">import</span>=<span class="string">&quot;cn.edu.ujn.dao.UserDaoImpl&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;修改用户信息&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;%</span><br><span class="line">    <span class="comment">//处理分页相关的数据</span></span><br><span class="line">		String pagesize = request.getParameter(<span class="string">&quot;pagesize&quot;</span>);</span><br><span class="line">		String currentpage = request.getParameter(<span class="string">&quot;currentpage&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span> (session.getAttribute(<span class="string">&quot;activeuser&quot;</span>) != <span class="keyword">null</span>) &#123;</span><br><span class="line">			IUserDao userDao = <span class="keyword">new</span> UserDaoImpl();</span><br><span class="line">			ArrayList&lt;User&gt; user = userDao.getUserById(Integer.parseInt(request.getParameter(<span class="string">&quot;userid&quot;</span>)));</span><br><span class="line">			</span><br><span class="line">	%&gt;</span><br><span class="line">	&lt;form action=<span class="string">&quot;UserServlet?action=updateuser&amp;userid=&lt;%=user.get(0).getId()%&gt;&amp;pagesize=&lt;%=pagesize %&gt;&amp;currentpage=&lt;%=currentpage %&gt;&quot;</span></span><br><span class="line">		method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        &lt;!-- 添加用户id的只读属性 --&gt;</span><br><span class="line">		Id:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;userid&quot;</span></span><br><span class="line">			value=<span class="string">&quot;&lt;%=user.get(0).getId()%&gt;&quot;</span> readonly=<span class="string">&quot;readonly&quot;</span>/&gt;&lt;br /&gt;</span><br><span class="line">		&lt;br /&gt; </span><br><span class="line">		用户名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span></span><br><span class="line">			value=<span class="string">&quot;&lt;%=user.get(0).getUsername()%&gt;&quot;</span> /&gt;&lt;br /&gt;</span><br><span class="line">		&lt;br /&gt; 密码：&lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;password&quot;</span></span><br><span class="line">			value=<span class="string">&quot;&lt;%=user.get(0).getPassword()%&gt;&quot;</span> /&gt;&lt;br /&gt;</span><br><span class="line">		&lt;br /&gt;</span><br><span class="line">        &lt;!--通过代码片的<span class="keyword">if</span>-<span class="keyword">else</span>来实现性别男女的预选--&gt;</span><br><span class="line">		&lt;%</span><br><span class="line">			<span class="keyword">if</span> (user.get(<span class="number">0</span>).getSex().equals(<span class="string">&quot;男&quot;</span>)) &#123;</span><br><span class="line">		%&gt;</span><br><span class="line">		性别：&lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;sex&quot;</span> value=<span class="string">&quot;男&quot;</span> checked&gt;男 &lt;input</span><br><span class="line">			type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;sex&quot;</span> value=<span class="string">&quot;女&quot;</span>&gt;女&lt;br /&gt;</span><br><span class="line">		&lt;br /&gt;</span><br><span class="line">		&lt;%</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		%&gt;</span><br><span class="line">		性别：&lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;sex&quot;</span> value=<span class="string">&quot;男&quot;</span>&gt;男 &lt;input</span><br><span class="line">			type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;sex&quot;</span> value=<span class="string">&quot;女&quot;</span> checked&gt;女&lt;br /&gt;</span><br><span class="line">		&lt;br /&gt;</span><br><span class="line">		&lt;%</span><br><span class="line">			&#125;</span><br><span class="line">		%&gt;</span><br><span class="line">		年龄：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;age&quot;</span> value=<span class="string">&quot;&lt;%=user.get(0).getAge()%&gt;&quot;</span>&gt;&lt;br /&gt;</span><br><span class="line">		&lt;br /&gt; 爱好：&lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;hobit&quot;</span> value=<span class="string">&quot;看电影&quot;</span> id=<span class="string">&quot;moive&quot;</span>&gt;看电影</span><br><span class="line">		&lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;hobit&quot;</span> value=<span class="string">&quot;听音乐&quot;</span> id=<span class="string">&quot;music&quot;</span>&gt;听音乐</span><br><span class="line">		&lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;hobit&quot;</span> value=<span class="string">&quot;读书&quot;</span> id=<span class="string">&quot;read&quot;</span>&gt;读书 &lt;input</span><br><span class="line">			type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;hobit&quot;</span> value=<span class="string">&quot;跑步&quot;</span> id=<span class="string">&quot;run&quot;</span>&gt;跑步&lt;br&gt;</span><br><span class="line">		&lt;br&gt; 邮箱：&lt;input type=<span class="string">&quot;email&quot;</span> name=<span class="string">&quot;email&quot;</span></span><br><span class="line">			value=<span class="string">&quot;&lt;%=user.get(0).getEmail()%&gt;&quot;</span>&gt;&lt;br /&gt;</span><br><span class="line">		&lt;br /&gt; 家庭地址：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;address&quot;</span></span><br><span class="line">			value=<span class="string">&quot;&lt;%=user.get(0).getAddress()%&gt;&quot;</span>&gt;&lt;br /&gt;</span><br><span class="line">		&lt;br /&gt; &lt;input type=<span class="string">&quot;submit&quot;</span> name=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;更新&quot;</span> /&gt;</span><br><span class="line">	&lt;/form&gt;</span><br><span class="line">    &lt;!--通过代码片加JavaScript的形式来控制爱好复选框的预选，一定要把这一段代码放在表单中的复选框代码的下面，因为html会自上而下解析--&gt;</span><br><span class="line">	&lt;%</span><br><span class="line">		<span class="keyword">if</span> (user.get(<span class="number">0</span>).getHobit().contains(<span class="string">&quot;看电影&quot;</span>)) &#123;</span><br><span class="line">	%&gt;</span><br><span class="line">	&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">		document.getElementById(<span class="string">&quot;moive&quot;</span>).checked = <span class="keyword">true</span>;</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">	&lt;%</span><br><span class="line">		&#125;</span><br><span class="line">			<span class="keyword">if</span> (user.get(<span class="number">0</span>).getHobit().contains(<span class="string">&quot;听音乐&quot;</span>)) &#123;</span><br><span class="line">	%&gt;</span><br><span class="line">	&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">		document.getElementById(<span class="string">&quot;music&quot;</span>).checked = <span class="keyword">true</span>;</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">	&lt;%</span><br><span class="line">		&#125;</span><br><span class="line">			<span class="keyword">if</span> (user.get(<span class="number">0</span>).getHobit().contains(<span class="string">&quot;读书&quot;</span>)) &#123;</span><br><span class="line">	%&gt;</span><br><span class="line">	&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">		document.getElementById(<span class="string">&quot;read&quot;</span>).checked = <span class="keyword">true</span>;</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">	&lt;%</span><br><span class="line">		&#125;</span><br><span class="line">			<span class="keyword">if</span> (user.get(<span class="number">0</span>).getHobit().contains(<span class="string">&quot;跑步&quot;</span>)) &#123;</span><br><span class="line">	%&gt;</span><br><span class="line">	&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">		document.getElementById(<span class="string">&quot;run&quot;</span>).checked = <span class="keyword">true</span>;</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">	&lt;%</span><br><span class="line">		&#125;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	%&gt;</span><br><span class="line">	还没登录呢，请先&lt;a href=<span class="string">&quot;login.jsp&quot;</span>&gt;登录&lt;/a&gt;。</span><br><span class="line">	&lt;%</span><br><span class="line">		&#125;</span><br><span class="line">	%&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>​        4.2、增加用户的controller层（servlet）：</p>
<p>​        action的值为updateuser</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(action.equals(<span class="string">&quot;updateuser&quot;</span>)) &#123;</span><br><span class="line">	String pagesize = request.getParameter(<span class="string">&quot;pagesize&quot;</span>);</span><br><span class="line">	String pagecount = request.getParameter(<span class="string">&quot;currentpage&quot;</span>);</span><br><span class="line">	String sex = request.getParameter(<span class="string">&quot;sex&quot;</span>);</span><br><span class="line">	<span class="keyword">int</span> age = Integer.parseInt(request.getParameter(<span class="string">&quot;age&quot;</span>));</span><br><span class="line">	String[] hobits = request.getParameterValues(<span class="string">&quot;hobit&quot;</span>);</span><br><span class="line">	String hobit = <span class="string">&quot;&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;hobits.length-<span class="number">1</span>; i++) &#123;</span><br><span class="line">		hobit = hobit + hobits[i] + <span class="string">&quot;,&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	hobit = hobit + hobits[hobits.length-<span class="number">1</span>];</span><br><span class="line">	String email = request.getParameter(<span class="string">&quot;email&quot;</span>);</span><br><span class="line">	String address = request.getParameter(<span class="string">&quot;address&quot;</span>);</span><br><span class="line">	User user = <span class="keyword">new</span> User();</span><br><span class="line">	user.setPassword(password);</span><br><span class="line">	user.setUsername(username);</span><br><span class="line">	user.setSex(sex);</span><br><span class="line">	user.setAge(age);</span><br><span class="line">	user.setHobit(hobit);</span><br><span class="line">	user.setEmail(email);</span><br><span class="line">	user.setAddress(address);</span><br><span class="line">	<span class="keyword">try</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (userDao.updateUser(Integer.parseInt(request.getParameter(<span class="string">&quot;userid&quot;</span>)),user)) &#123;</span><br><span class="line">                  <span class="comment">//添加成功之后带着分页方面的信息到findallsub方法，接下来还是在controller层中</span></span><br><span class="line">			response.sendRedirect(<span class="string">&quot;UserServlet?action=findallsub&amp;pagesize=&quot;</span>+pagesize+<span class="string">&quot;&amp;currentpage=&quot;</span>+pagecount);</span><br><span class="line">		&#125; <span class="keyword">else</span></span><br><span class="line">			response.getWriter().println(<span class="string">&quot;更新失败！&quot;</span>);</span><br><span class="line">	&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">		e.printStackTrace();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        findallsub（）：</p>
<p>​        以分页的形式查询所有的用户信息</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(action.equals(<span class="string">&quot;findallsub&quot;</span>)) &#123;</span><br><span class="line">			<span class="keyword">int</span> currentpage;</span><br><span class="line">			<span class="keyword">if</span>(Integer.parseInt(request.getParameter(<span class="string">&quot;currentpage&quot;</span>))&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">				currentpage = <span class="number">1</span>;</span><br><span class="line">			&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">				currentpage = Integer.parseInt(request.getParameter(<span class="string">&quot;currentpage&quot;</span>));</span><br><span class="line">			&#125;</span><br><span class="line">			ArrayList&lt;User&gt; userlist=userDao.findUsers(currentpage,Integer.parseInt(request.getParameter(<span class="string">&quot;pagesize&quot;</span>)));</span><br><span class="line">			request.setAttribute(<span class="string">&quot;userList&quot;</span>, userlist);</span><br><span class="line">    <span class="comment">//查询完成后跳转到success.jsp</span></span><br><span class="line">			request.getRequestDispatcher(<span class="string">&quot;success.jsp&quot;</span>).forward(request, response);</span><br><span class="line">		&#125;</span><br></pre></td></tr></table></figure>

<p>​    4.3、增加用户的model层（Dao层）：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">updateUser</span><span class="params">(<span class="keyword">int</span> id,User user)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">try</span> &#123;</span><br><span class="line">		Connection con = DBHelper.getConnection();</span><br><span class="line">		String sql = <span class="string">&quot;update user set username=?,password=?,sex=?,age=?,hobit=?,email=?,address=? where id=?&quot;</span>;</span><br><span class="line">		PreparedStatement st = con.prepareStatement(sql);</span><br><span class="line">		st.setString(<span class="number">1</span>, user.getUsername());</span><br><span class="line">		st.setString(<span class="number">2</span>, user.getPassword());	</span><br><span class="line">		st.setString(<span class="number">3</span>, user.getSex());</span><br><span class="line">		st.setInt(<span class="number">4</span>, user.getAge());</span><br><span class="line">		st.setString(<span class="number">5</span>, user.getHobit());</span><br><span class="line">		st.setString(<span class="number">6</span>, user.getEmail());</span><br><span class="line">		st.setString(<span class="number">7</span>, user.getAddress());</span><br><span class="line">		st.setInt(<span class="number">8</span>, id);</span><br><span class="line">           <span class="comment">//返回更新成功的条数</span></span><br><span class="line">		<span class="keyword">int</span> n = st.executeUpdate();</span><br><span class="line">		st.close();</span><br><span class="line">		con.close();</span><br><span class="line">		<span class="keyword">if</span> (n &gt; <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125; <span class="keyword">catch</span> (Exception ce) &#123;</span><br><span class="line">		System.out.println(ce);</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>findUser（）见上；</p>
<h5 id="5、删除用户"><a href="#5、删除用户" class="headerlink" title="5、删除用户"></a>5、删除用户</h5><p>​    5.1、用户在主界面（success.jsp）中点击删除用户超链接后，代码会直接进入controller层（servlet）</p>
<p>​    5.2、删除用户的controller层（servlet）:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(action.equals(<span class="string">&quot;deleteoneuser&quot;</span>)) &#123;</span><br><span class="line">			String pagesize = request.getParameter(<span class="string">&quot;pagesize&quot;</span>);</span><br><span class="line">			String currentpage = request.getParameter(<span class="string">&quot;currentpage&quot;</span>);</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				<span class="keyword">if</span> (userDao.deleteUserById(Integer.parseInt(request.getParameter(<span class="string">&quot;userid&quot;</span>)))) &#123;</span><br><span class="line">                    <span class="comment">//删除成功后通过findallsub，通过分页的形式再次显示success.jsp</span></span><br><span class="line">					response.sendRedirect(<span class="string">&quot;UserServlet?action=findallsub&amp;pagesize=&quot;</span>+pagesize+<span class="string">&quot;&amp;currentpage=&quot;</span>+currentpage);</span><br><span class="line">				&#125; <span class="keyword">else</span></span><br><span class="line">					response.getWriter().println(<span class="string">&quot;删除失败！&quot;</span>);</span><br><span class="line">			&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br></pre></td></tr></table></figure>

<p>​    5.3、通过用户的id来删除用户的model层（Dao层）：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">deleteUserById</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Connection con = DBHelper.getConnection(); </span><br><span class="line">			String sql = <span class="string">&quot;delete from user where id=?&quot;</span>;</span><br><span class="line">			PreparedStatement st = con.prepareStatement(sql);</span><br><span class="line">			st.setInt(<span class="number">1</span>, id);</span><br><span class="line">			st.executeUpdate();</span><br><span class="line">			st.close();</span><br><span class="line">			con.close();</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception ce) &#123;</span><br><span class="line">			System.out.println(ce);</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<h5 id="6、增加一名用户"><a href="#6、增加一名用户" class="headerlink" title="6、增加一名用户"></a>6、增加一名用户</h5><p>​    6.1、用户在主界面上（success.jsp）上点击超连接 ‘ 增加一名用户 ’，会进入adduser.jsp,接下里的流程与注册（register）的流程类似。</p>
<p>​    6.2、增加用户的view层（adduser.jsp）</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=utf-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;utf-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;增加用户&lt;/title&gt;</span><br><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">	<span class="function">function <span class="title">check</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">var</span> inputdate = document.getElementById(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span>(inputdate.value==<span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">			alert(<span class="string">&quot;请输入用户名&quot;</span>);</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		inputdate = document.getElementById(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span>(inputdate.value==<span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">			alert(<span class="string">&quot;请输入密码&quot;</span>);</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		inputdate = document.getElementById(<span class="string">&quot;age&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span>(inputdate.value==<span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">			alert(<span class="string">&quot;请输入年龄&quot;</span>);</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		inputdate = document.getElementById(<span class="string">&quot;email&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span>(inputdate.value==<span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">			alert(<span class="string">&quot;请输入邮箱&quot;</span>);</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		inputdate = document.getElementById(<span class="string">&quot;address&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span>(inputdate.value==<span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">			alert(<span class="string">&quot;请输入地址&quot;</span>);</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">	String currentpage = request.getParameter(<span class="string">&quot;currentpage&quot;</span>);</span><br><span class="line">	String pagesize = request.getParameter(<span class="string">&quot;pagesize&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;%<span class="keyword">if</span>(session.getAttribute(<span class="string">&quot;activeuser&quot;</span>)!=<span class="keyword">null</span>)&#123; %&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;UserServlet?action=adduser&amp;pagesize=&lt;%=pagesize %&gt;&amp;currentpage=&lt;%=currentpage %&gt;&quot;</span> method=<span class="string">&quot;post&quot;</span> onsubmit=<span class="string">&quot;return check()&quot;</span>&gt;</span><br><span class="line">  	用户名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span> id=<span class="string">&quot;username&quot;</span>/&gt;&lt;br/&gt;&lt;br/&gt;</span><br><span class="line">  	密码：&lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;password&quot;</span> id=<span class="string">&quot;password&quot;</span> /&gt;&lt;br/&gt;&lt;br/&gt;</span><br><span class="line">  	性别：&lt;input type=<span class="string">&quot;radio&quot;</span> name =<span class="string">&quot;sex&quot;</span> value =<span class="string">&quot;男&quot;</span>&gt;男</span><br><span class="line">  		&lt;input type=<span class="string">&quot;radio&quot;</span> name =<span class="string">&quot;sex&quot;</span> value =<span class="string">&quot;女&quot;</span>&gt;女&lt;br/&gt;&lt;br/&gt;</span><br><span class="line">  	年龄：&lt;input type=<span class="string">&quot;text&quot;</span> name =<span class="string">&quot;age&quot;</span>  id=<span class="string">&quot;age&quot;</span> &gt;&lt;br/&gt;&lt;br/&gt;</span><br><span class="line">  	爱好：&lt;input type =<span class="string">&quot;checkbox&quot;</span> name =<span class="string">&quot;hobit&quot;</span> value = <span class="string">&quot;看电影&quot;</span>&gt;看电影</span><br><span class="line">  		&lt;input type =<span class="string">&quot;checkbox&quot;</span> name =<span class="string">&quot;hobit&quot;</span> value = <span class="string">&quot;听音乐&quot;</span>&gt;听音乐</span><br><span class="line">  		&lt;input type =<span class="string">&quot;checkbox&quot;</span> name =<span class="string">&quot;hobit&quot;</span> value = <span class="string">&quot;读书&quot;</span>&gt;读书</span><br><span class="line">  		&lt;input type =<span class="string">&quot;checkbox&quot;</span> name =<span class="string">&quot;hobit&quot;</span> value = <span class="string">&quot;跑步&quot;</span>&gt;跑步&lt;br&gt;&lt;br&gt;</span><br><span class="line">  	邮箱：&lt;input type=<span class="string">&quot;email&quot;</span> name = <span class="string">&quot;email&quot;</span> id=<span class="string">&quot;email&quot;</span>  &gt;&lt;br/&gt;&lt;br/&gt;</span><br><span class="line">  	家庭地址：&lt;input type =<span class="string">&quot;text&quot;</span> name =<span class="string">&quot;address&quot;</span> id=<span class="string">&quot;address&quot;</span>&gt;&lt;br/&gt;&lt;br/&gt;</span><br><span class="line">  	&lt;input type=<span class="string">&quot;submit&quot;</span> name=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;插入用户&quot;</span>/&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;%&#125;<span class="keyword">else</span>&#123;%&gt;</span><br><span class="line">	还没登录呢，请先去&lt;a href=<span class="string">&quot;login.jsp&quot;</span>&gt;登录&lt;/a&gt;。</span><br><span class="line">&lt;%&#125;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>​        6.3、增加用户的controller层（servlet）：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(action.equals(<span class="string">&quot;adduser&quot;</span>)) &#123;</span><br><span class="line">			String pagesize = request.getParameter(<span class="string">&quot;pagesize&quot;</span>);</span><br><span class="line">			String currentpage = request.getParameter(<span class="string">&quot;currentpage&quot;</span>);</span><br><span class="line">			String sex = request.getParameter(<span class="string">&quot;sex&quot;</span>);</span><br><span class="line">			<span class="keyword">int</span> age = Integer.parseInt(request.getParameter(<span class="string">&quot;age&quot;</span>));</span><br><span class="line">			String[] hobits = request.getParameterValues(<span class="string">&quot;hobit&quot;</span>);</span><br><span class="line">			String hobit = <span class="string">&quot;&quot;</span>;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;hobits.length-<span class="number">1</span>; i++) &#123;</span><br><span class="line">				hobit = hobit + hobits[i] + <span class="string">&quot;,&quot;</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			hobit = hobit + hobits[hobits.length-<span class="number">1</span>];</span><br><span class="line">			String email = request.getParameter(<span class="string">&quot;email&quot;</span>);</span><br><span class="line">			String address = request.getParameter(<span class="string">&quot;address&quot;</span>);</span><br><span class="line">			User user = <span class="keyword">new</span> User();</span><br><span class="line">			user.setPassword(password);</span><br><span class="line">			user.setUsername(username);</span><br><span class="line">			user.setSex(sex);</span><br><span class="line">			user.setAge(age);</span><br><span class="line">			user.setHobit(hobit);</span><br><span class="line">			user.setEmail(email);</span><br><span class="line">			user.setAddress(address);</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				<span class="keyword">if</span> (userDao.addUser(user)) &#123;</span><br><span class="line">					response.sendRedirect(<span class="string">&quot;UserServlet?action=findallsub&amp;pagesize=&quot;</span>+pagesize+<span class="string">&quot;&amp;currentpage=&quot;</span>+currentpage);</span><br><span class="line">				&#125; <span class="keyword">else</span></span><br><span class="line">					response.getWriter().println(<span class="string">&quot;插入失败！&quot;</span>);</span><br><span class="line">			&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br></pre></td></tr></table></figure>

<p>​        6.4、增加用户的model层（Dao层）：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">addUser</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Connection con = DBHelper.getConnection();</span><br><span class="line">			String sql = <span class="string">&quot;insert into user(username,password,sex,age,hobit,email,address) values(?,?,?,?,?,?,?)&quot;</span>;</span><br><span class="line">			PreparedStatement st = con.prepareStatement(sql);</span><br><span class="line">			st.setString(<span class="number">1</span>, user.getUsername());</span><br><span class="line">			st.setString(<span class="number">2</span>, user.getPassword());	</span><br><span class="line">			st.setString(<span class="number">3</span>, user.getSex());</span><br><span class="line">			st.setInt(<span class="number">4</span>, user.getAge());</span><br><span class="line">			st.setString(<span class="number">5</span>, user.getHobit());</span><br><span class="line">			st.setString(<span class="number">6</span>, user.getEmail());</span><br><span class="line">			st.setString(<span class="number">7</span>, user.getAddress());</span><br><span class="line">			<span class="keyword">int</span> n = st.executeUpdate();</span><br><span class="line">			st.close();</span><br><span class="line">			con.close();</span><br><span class="line">			<span class="keyword">if</span> (n &gt; <span class="number">0</span>) &#123;</span><br><span class="line">				<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception ce) &#123;</span><br><span class="line">			System.out.println(ce);</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125;	</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<h5 id="7、精准查询"><a href="#7、精准查询" class="headerlink" title="7、精准查询"></a>7、精准查询</h5><p>​        7.1、源码中精准查询是通过查找id来实现的</p>
<p>​        7.2、在success中建立一个表单（form），内写一个输入框用来输入要查询的id，用户点击按钮后即进入精准查询的controller层</p>
<p>​        7.3、精准查询的controller层：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(action.equals(<span class="string">&quot;findoneuser&quot;</span>)) &#123;</span><br><span class="line">			<span class="keyword">if</span>(request.getParameter(<span class="string">&quot;userid&quot;</span>)!=<span class="keyword">null</span> &amp;&amp; !request.getParameter(<span class="string">&quot;userid&quot;</span>).equals(<span class="string">&quot;&quot;</span>)) &#123;</span><br><span class="line">			ArrayList&lt;User&gt; user=userDao.getUserById(Integer.parseInt(request.getParameter(<span class="string">&quot;userid&quot;</span>)));</span><br><span class="line">			<span class="keyword">if</span>(user != <span class="keyword">null</span> &amp;&amp; user.size()!=<span class="number">0</span>) </span><br><span class="line">				request.setAttribute(<span class="string">&quot;userList&quot;</span>, user);</span><br><span class="line">				request.getRequestDispatcher(<span class="string">&quot;success.jsp&quot;</span>).forward(request, response);</span><br><span class="line">			&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">				ArrayList&lt;User&gt; userlist=userDao.findAllUsers();</span><br><span class="line">				request.setAttribute(<span class="string">&quot;userList&quot;</span>, userlist);</span><br><span class="line">				request.getRequestDispatcher(<span class="string">&quot;success.jsp&quot;</span>).forward(request, response);</span><br><span class="line">			&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br></pre></td></tr></table></figure>

<p>​        7.4、精准查询的model层（Dao层）：</p>
<p>此处的返回值其实应该设置为User，但是我已经这样写了，就不想再改了 : (，实现方法是一样的。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ArrayList&lt;User&gt; <span class="title">getUserById</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">		User user = <span class="keyword">null</span>;</span><br><span class="line">		ArrayList&lt;User&gt; userList=<span class="keyword">new</span> ArrayList&lt;User&gt;();</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Connection con = DBHelper.getConnection(); </span><br><span class="line">			String sql = <span class="string">&quot;select * from user where id=?&quot;</span>;</span><br><span class="line">			PreparedStatement st = con.prepareStatement(sql);</span><br><span class="line">			st.setInt(<span class="number">1</span>, id);</span><br><span class="line">			ResultSet rs = st.executeQuery();</span><br><span class="line">			<span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">				user = <span class="keyword">new</span> User();</span><br><span class="line">				user.setId(rs.getInt(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">				user.setUsername(rs.getString(<span class="string">&quot;username&quot;</span>));</span><br><span class="line">				user.setPassword(rs.getString(<span class="string">&quot;password&quot;</span>));</span><br><span class="line">				user.setSex(rs.getString(<span class="string">&quot;sex&quot;</span>));</span><br><span class="line">				user.setAge(rs.getInt(<span class="string">&quot;age&quot;</span>));</span><br><span class="line">				user.setHobit(rs.getString(<span class="string">&quot;hobit&quot;</span>));</span><br><span class="line">				user.setEmail (rs.getString(<span class="string">&quot;email&quot;</span>));</span><br><span class="line">				user.setAddress(rs.getString(<span class="string">&quot;address&quot;</span>));</span><br><span class="line">				userList.add(user);</span><br><span class="line">			&#125;</span><br><span class="line">			rs.close();</span><br><span class="line">			st.close();</span><br><span class="line">			con.close();</span><br><span class="line">			<span class="keyword">return</span> userList;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception ce) &#123;</span><br><span class="line">			System.out.println(ce);</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<h5 id="8、模糊查询"><a href="#8、模糊查询" class="headerlink" title="8、模糊查询"></a>8、模糊查询</h5><p>本质上与精准查询的实现方法是一致的，只有Dao的sql语句不一样，其他的大多相同，直接上代码吧</p>
<p>Controller层：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(action.equals(<span class="string">&quot;findsomeuser&quot;</span>)) &#123;</span><br><span class="line">			ArrayList&lt;User&gt; user=userDao.getSomeUser(request.getParameter(<span class="string">&quot;userdate&quot;</span>));</span><br><span class="line">			<span class="keyword">if</span>(user != <span class="keyword">null</span> &amp;&amp; user.size()!=<span class="number">0</span>) &#123;</span><br><span class="line">				request.setAttribute(<span class="string">&quot;userList&quot;</span>, user);</span><br><span class="line">				request.getRequestDispatcher(<span class="string">&quot;success.jsp&quot;</span>).forward(request, response);</span><br><span class="line">			&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">				ArrayList&lt;User&gt; userlist=userDao.findAllUsers();</span><br><span class="line">				request.setAttribute(<span class="string">&quot;userList&quot;</span>, userlist);</span><br><span class="line">				request.getRequestDispatcher(<span class="string">&quot;success.jsp&quot;</span>).forward(request, response);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br></pre></td></tr></table></figure>

<p>Dao层：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ArrayList&lt;User&gt; <span class="title">getSomeUser</span><span class="params">(String userdate)</span> </span>&#123;</span><br><span class="line">		User user = <span class="keyword">null</span>;</span><br><span class="line">		ArrayList&lt;User&gt; userList=<span class="keyword">new</span> ArrayList&lt;User&gt;();</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Connection con = DBHelper.getConnection(); </span><br><span class="line">            <span class="comment">//注意这里的sql语句的写法，以及后面的like concat(&#x27;%&#x27;,?,&#x27;%&#x27;)</span></span><br><span class="line">			String sql = <span class="string">&quot;SELECT * FROM user Where username like concat(&#x27;%&#x27;,?,&#x27;%&#x27;)&quot;</span>;</span><br><span class="line">			PreparedStatement st = con.prepareStatement(sql);</span><br><span class="line">			st.setString(<span class="number">1</span>, userdate);</span><br><span class="line">			ResultSet rs = st.executeQuery();</span><br><span class="line">			<span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">				user = <span class="keyword">new</span> User();</span><br><span class="line">				user.setId(rs.getInt(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">				user.setUsername(rs.getString(<span class="string">&quot;username&quot;</span>));</span><br><span class="line">				user.setPassword(rs.getString(<span class="string">&quot;password&quot;</span>));</span><br><span class="line">				user.setSex(rs.getString(<span class="string">&quot;sex&quot;</span>));</span><br><span class="line">				user.setAge(rs.getInt(<span class="string">&quot;age&quot;</span>));</span><br><span class="line">				user.setHobit(rs.getString(<span class="string">&quot;hobit&quot;</span>));</span><br><span class="line">				user.setEmail (rs.getString(<span class="string">&quot;email&quot;</span>));</span><br><span class="line">				user.setAddress(rs.getString(<span class="string">&quot;address&quot;</span>));</span><br><span class="line">				userList.add(user);</span><br><span class="line">			&#125;</span><br><span class="line">			rs.close();</span><br><span class="line">			st.close();</span><br><span class="line">			con.close();</span><br><span class="line">			<span class="keyword">return</span> userList;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception ce) &#123;</span><br><span class="line">			System.out.println(ce);</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<h5 id="9、全局模糊查询"><a href="#9、全局模糊查询" class="headerlink" title="9、全局模糊查询"></a>9、全局模糊查询</h5><p>（源码里没写，这里仅提供sql的写法，是否可行我也没有试）</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	id, </span><br><span class="line">	username, </span><br><span class="line">	password, </span><br><span class="line">	sex, </span><br><span class="line">	age, </span><br><span class="line">	email,</span><br><span class="line">	hobit,</span><br><span class="line">	<span class="function">address</span></span><br><span class="line"><span class="function">FROM user as a WHERE <span class="title">CONCAT</span><span class="params">(id,username,password,sex,age,email,hobit,address)</span> LIKE <span class="title">CONCAT</span><span class="params">(<span class="string">&#x27;%&#x27;</span>, ? , <span class="string">&#x27;%&#x27;</span>)</span></span>;</span><br></pre></td></tr></table></figure>

<h5 id="10、用户的退出"><a href="#10、用户的退出" class="headerlink" title="10、用户的退出"></a>10、用户的退出</h5><p>整体思想就是在session中把存用户名的字段remove掉</p>
<p>具体代码：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=utf-8&quot;</span></span><br><span class="line">    pageEncoding=<span class="string">&quot;utf-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;用户退出&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="comment">//判断session中的用户信息是否存在</span></span><br><span class="line">	<span class="keyword">if</span>(session.getAttribute(<span class="string">&quot;activeuser&quot;</span>) !=<span class="keyword">null</span> )&#123;</span><br><span class="line">		session.removeAttribute(<span class="string">&quot;activeuser&quot;</span>);</span><br><span class="line">        <span class="comment">//判断是否成功remove用户信息</span></span><br><span class="line">		<span class="keyword">if</span>(session.getAttribute(<span class="string">&quot;activeuser&quot;</span>) ==<span class="keyword">null</span>)&#123;</span><br><span class="line">			out.println(<span class="string">&quot;退出成功！3秒后跳转到登录页面&quot;</span>);</span><br><span class="line">			response.setHeader(<span class="string">&quot;refresh&quot;</span>, <span class="string">&quot;3;url=login.jsp&quot;</span>);</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			out.println(<span class="string">&quot;退出失败！&quot;</span>);</span><br><span class="line">			request.getRequestDispatcher(<span class="string">&quot;success.jsp&quot;</span>).forward(request, response);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		%&gt;</span><br><span class="line">		还没登录呢，请先去&lt;a href=<span class="string">&quot;login.jsp&quot;</span>&gt;登录&lt;/a&gt;。</span><br><span class="line">		&lt;%</span><br><span class="line">	&#125;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h5 id="11、关于分页有几点想说的"><a href="#11、关于分页有几点想说的" class="headerlink" title="11、关于分页有几点想说的"></a>11、关于分页有几点想说的</h5><p>​    11.1、源码中的分页实现了以下几点：①可以实现在第一页（最后一页）的情况下点击上一页（下一页），仍然在第一页（最后一页）。②在非第一页的情况下，删除（修改）一条数据，不会跳转到第一页，会继续在当前页显示信息。</p>
<p>​    12.2、就以上两点展开实现原理的讲解</p>
<p>​    首先，我们要实现分页，就要设置在一个页面上显示多少条数（pagesize）、还有当前页面是第几页（currentpage）以及通过数据库中数据条数和pagesize计算出来的显示总页数（pagecount）</p>
<p>​    在该系统中，我没有设置单页显示数量的可选值，我喜欢数字7，所以我在整个程序中都定义了，pagesize=7。如果要实现单页显示数量的用户自定义可选，可以设置一个下拉框，并通过JavaScript获取里面的值，来定义到pagesize上。</p>
<p>以下是我实现分页以及实现修改删除不跳页面的几段关键代码</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">    <span class="comment">//这是success.jsp上设置的分页三个重要值得方法</span></span><br><span class="line">	<span class="keyword">int</span> currentpage=<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">int</span> pagesize = <span class="number">7</span>;</span><br><span class="line">	IUserDao userdao = <span class="keyword">new</span> UserDaoImpl();</span><br><span class="line"><span class="comment">//调用Dao层，通过数据库中的数据的条数来计算出pagecount</span></span><br><span class="line">	<span class="keyword">int</span> pagecount = userdao.getPageCount(pagesize);</span><br><span class="line">	<span class="keyword">if</span>(request.getParameter(<span class="string">&quot;currentpage&quot;</span>)!=<span class="keyword">null</span>)&#123;</span><br><span class="line">		currentpage = Integer.parseInt(request.getParameter(<span class="string">&quot;currentpage&quot;</span>));</span><br><span class="line">        <span class="comment">//限制到达第一页了，就不能再让currentpage再减小了，即在第一页点击上一页不起作用</span></span><br><span class="line">		currentpage = currentpage&lt;<span class="number">1</span>?<span class="number">1</span>:currentpage;</span><br><span class="line">	&#125;</span><br><span class="line">	%&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">共&lt;%=pagecount %&gt;页，当前&lt;%=currentpage %&gt;/&lt;%=pagecount %&gt;页，&amp;nbsp;&amp;nbsp;</span><br><span class="line">		&lt;%<span class="keyword">if</span>(currentpage&lt;pagecount &amp;&amp; currentpage &gt;<span class="number">0</span>)&#123; %&gt;</span><br><span class="line">		&lt;a href =<span class="string">&quot;UserServlet?action=findallsub&amp;currentpage=&lt;%=currentpage - 1%&gt;&amp;pagesize=&lt;%=pagesize %&gt;&quot;</span>&gt;上一页&lt;/a&gt; &amp;nbsp;&lt;a href =<span class="string">&quot;UserServlet?action=findallsub&amp;currentpage=&lt;%=currentpage + 1%&gt;&amp;pagesize=&lt;%=pagesize %&gt;&quot;</span>&gt;下一页&lt;/a&gt;</span><br><span class="line">	&lt;%&#125;<span class="keyword">else</span> <span class="keyword">if</span>(currentpage&gt;=pagecount)&#123; %&gt;</span><br><span class="line">		&lt;a href =<span class="string">&quot;UserServlet?action=findallsub&amp;currentpage=&lt;%=currentpage - 1%&gt;&amp;pagesize=&lt;%=pagesize %&gt;&quot;</span>&gt;上一页&lt;/a&gt; &amp;nbsp;&lt;a href =<span class="string">&quot;UserServlet?action=findallsub&amp;currentpage=&lt;%=pagecount %&gt;&amp;pagesize=&lt;%=pagesize %&gt;&quot;</span>&gt;下一页&lt;/a&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;% &#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>上面这两条代码写的很乱，仔细分析一下，另外还有一点在实现页面之间跳转的同时，要根据需要带着pagesize、currentpage和pagecount三个变量。具体逻辑要在整个源码中分析。</p>
<p>userdao.getPageCount（）：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPageCount</span><span class="params">(<span class="keyword">int</span> pagesize)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Connection con = DBHelper.getConnection(); </span><br><span class="line">			String sql = <span class="string">&quot;SELECT count(*) FROM user&quot;</span>;</span><br><span class="line">			PreparedStatement st = con.prepareStatement(sql);</span><br><span class="line">			ResultSet rs = st.executeQuery();</span><br><span class="line">			<span class="keyword">int</span> records=<span class="number">0</span>;</span><br><span class="line">			<span class="keyword">if</span>(rs.next()) &#123;</span><br><span class="line">				records = rs.getInt(<span class="number">1</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			rs.close();</span><br><span class="line">			st.close();</span><br><span class="line">			con.close();</span><br><span class="line">            <span class="comment">//通过总条数（records）和单页条数（pagesize）计算要分几页</span></span><br><span class="line">			<span class="keyword">return</span> (records-<span class="number">1</span>)/pagesize+<span class="number">1</span>;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception ce) &#123;</span><br><span class="line">			System.out.println(ce);</span><br><span class="line">			<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<h4 id="五、数据库方面的补充（DBHelper）"><a href="#五、数据库方面的补充（DBHelper）" class="headerlink" title="五、数据库方面的补充（DBHelper）"></a>五、数据库方面的补充（DBHelper）</h4><p>因为dao层中的所有方法在进行操作时都要进行数据库的连接操作，所以就把数据库的连接操作写成了一个类，在每次需要的时候拿出来调用即可</p>
<p>DBHelper.java:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.edu.ujn.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DBHelper</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String driver = <span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>;</span><br><span class="line">    <span class="comment">//数据库的连接地址，以及传输过程中用什么样的字符集</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String url = <span class="string">&quot;jdbc:mysql://localhost:3306/jsp?useUnicode=true&amp;characterEncoding=UTF-8&quot;</span>;</span><br><span class="line">    <span class="comment">//数据库的用户名和密码</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String username = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String password = <span class="string">&quot;root123&quot;</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> Connection conn = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  静态代码块负责加载驱动</span></span><br><span class="line"><span class="comment">//  一般情况下,如果有些代码必须在项目启动的时候就执行的时候,需要使用静态代码块,这种代码是主动执行的，且优先于主函数。</span></span><br><span class="line">	<span class="keyword">static</span> &#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Class.forName(driver);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">			ex.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (conn == <span class="keyword">null</span> || conn.isClosed()) &#123;</span><br><span class="line">			conn = DriverManager.getConnection(url, username, password);</span><br><span class="line">			<span class="keyword">return</span> conn;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> conn;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>数据库里的信息如下：</p>
<p><img src="%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BF%A1%E6%81%AF.png" alt="数据库信息"></p>
<h4 id="六、总结"><a href="#六、总结" class="headerlink" title="六、总结"></a>六、总结</h4><p>源码还有很多地方需要完善，比如在进行模糊查询和精准查询时，因为还是在success.jsp里面显示的信息，所以<strong>没有实现查询之后的信息的分页展示</strong>，当时想了一种方法，比如在查询完成后会再次获取一遍records重新计算一遍pagecount就可以了。还有就是虽然限制了注册时不允许重复用户名，但是<strong>依然存在更新时修改用户名，也可能出现重复用户名的问题</strong>，如果依然调用注册时的检验方法checkUserName()会出现，不修改用户名不能更新的情况，因为要修改的用户一定已经在数据库中了，所以调用checkUsername()的结果一定是true。对于这一问题，可以在写一个查询方法updateCheckUsername()，检验方法设置成查询出来的相同用户名的那一条信息与当前正在修改的用户的信息进行id的比对，如果一样则允许进行修改，如果不一样则不允许进行修改。</p>
<p><u><em>2021.10.25  杜沐Pro in UJN</em></u></p>
]]></content>
      <categories>
        <category>Jsp</category>
      </categories>
      <tags>
        <tag>Jsp</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo 博客使用教程</title>
    <url>/2021/10/30/hexo-%E5%8D%9A%E5%AE%A2%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/</url>
    <content><![CDATA[<p>关于hexo发布博客的一些使用教程</p>
<span id="more"></span>

<h4 id="1、主要命令"><a href="#1、主要命令" class="headerlink" title="1、主要命令"></a>1、主要命令</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo clean //清除缓存文件 db.json 和已生成的静态文件 public ，一般情况下不用</span><br><span class="line">hexo g //生成网站静态文件到默认设置的 public 文件夹</span><br><span class="line">hexo s //启动本地服务器，用于预览主题。默认地址： http://localhost:4000/</span><br><span class="line">hexo d //自动生成网站静态文件，并部署到设定的仓库</span><br><span class="line">hexo new &quot;文件名 六&quot; //新建一篇标题为 文件名 六 的文章，因为标题里有空格，所以加上了引号。</span><br></pre></td></tr></table></figure>

<h4 id="2、文章如果有图片，图片链接的处理方式"><a href="#2、文章如果有图片，图片链接的处理方式" class="headerlink" title="2、文章如果有图片，图片链接的处理方式"></a>2、文章如果有图片，图片链接的处理方式</h4><p>在创建文章的时候（使用<code>hexo new &quot;文件名 六&quot;</code>创建文章时），会同步生成一个同名的文件夹，只需要把需要的图片修改好名字（url.jpg）放在该文件夹里面即可，Markdown文件中图片的链接为</p>
<p><code>![](url.jpg)</code></p>
<h4 id="3、文章“阅读更多”的写法"><a href="#3、文章“阅读更多”的写法" class="headerlink" title="3、文章“阅读更多”的写法"></a>3、文章“阅读更多”的写法</h4><p>只需要在想要开始隐藏的文本的上方写入以下代码：</p>
<p><code>&lt;!-- more --&gt;</code></p>
<h4 id="4、在github上上传新的项目的方法"><a href="#4、在github上上传新的项目的方法" class="headerlink" title="4、在github上上传新的项目的方法"></a>4、在github上上传新的项目的方法</h4><p><a href="https://blog.csdn.net/generallizhong/article/details/94014779?utm_source=app&app_version=4.14.0&code=app_1562916241&uLinkId=usr1mkqgl919blen">手把手教如何将本地项目上传到Github（包会）<em>lizhong-CSDN博客</em></a></p>
<p><a href="https://blog.csdn.net/generallizhong/article/details/101518533">上传文件到git用命令最简单的方式_lizhong-CSDN博客</a></p>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>千词百练Unit16-20</title>
    <url>/2021/10/31/%E5%8D%83%E8%AF%8D%E7%99%BE%E7%BB%83Unit16-20/</url>
    <content><![CDATA[<p>千词百练Unit16-20生词</p>
<span id="more"></span>

<h3 id="Unit16"><a href="#Unit16" class="headerlink" title="Unit16"></a>Unit16</h3><p>1、<strong>ambiguous</strong>  adj.模棱两可的；含糊不清的</p>
<p>2、<strong>cloak</strong> v.掩盖，掩饰  n. 斗篷，披风</p>
<p>3、<strong>aspire</strong>  v.渴望；追求</p>
<p>4、<strong>aspiration</strong> n.志向，抱负</p>
<p>5、<strong>reflect</strong>  v.深思；考虑；带来；反射（光、热、声等）；反映</p>
<p>6、<strong>reflection</strong> v.深思；考虑；带来</p>
<p>7、<strong>incentive</strong>  n.刺激；动机；鼓励 adj.刺激（性）的；鼓励（性）的</p>
<p>8、<strong>impetus</strong>  n.推动（力）</p>
<p>9、<strong>impulse</strong>  n.驱使；推力；推动</p>
<p>10、<strong>candidate</strong>  n.（职位、得奖资格等的）候选人；候选者；投考者</p>
<h3 id="Unit17"><a href="#Unit17" class="headerlink" title="Unit17"></a>Unit17</h3><p>1、<strong>premise</strong>  n.前提；（作为先决条件的）假定，假设</p>
<p>2、<strong>prerequisite</strong>  n.前提，先决条件</p>
<p>3、<strong>resource</strong>  n.资源；【常做复数】储备力量；财力</p>
<p>4、<strong>source</strong>  n.来源 ; 出处 ; 信息来源 ; 原始资料 ; 起源 ; 根源 ; 原因</p>
<p>5、<strong>resourceful</strong>  adj.资源丰富的；足智多谋的；机敏的</p>
<p>6、<strong>wit</strong>  n.智力；明智</p>
<p>7、<strong>in return (for)</strong>  作为（对…的）报答（或回报）</p>
<p>8、<strong>return</strong>  v.返回；归还；回报；报答 n. 返回；归还；收益 adj. 往返的；回程的；再次的</p>
<p>9、<strong>reliance</strong>  n.依赖</p>
<p>10、<strong>reliability</strong>  n.可信度，可靠性</p>
<p>11、<strong>sustain</strong>  v.支撑；维持（生命、生存）；经受；遭受</p>
<p>12、<strong>sustainable</strong>  adj.可持续的；</p>
<p>13、<strong>sustained</strong>  adj.持久的，持续的</p>
<p>14、<strong>affect</strong>  v.影响</p>
<p>15、<strong>influence</strong>  n.影响；v.影响</p>
<p>16、<strong>merit</strong> n.长处，优点；功绩；价值 v.值得，应受</p>
<p>17、<strong>demerit</strong>  n.缺点；短处；过失</p>
<p>18、<strong>defect</strong>  n.缺点；缺陷</p>
<p>19、**ignore ** v.不顾；不理；忽略，忽视</p>
<p>20、<strong>ignorant</strong>  adj.无知的；愚昧的</p>
<p>21、<strong>neglect</strong>  v.忽视，忽略</p>
<p>22、<strong>disregard</strong>  v.不顾，不理会；漠视</p>
<p>23、<strong>overlook</strong>  v.忽略；未注意到</p>
<h3 id="Unit18"><a href="#Unit18" class="headerlink" title="Unit18"></a>Unit18</h3><p>1、<strong>bar</strong>  n.（美国的）律师职业；条；块；栏杆；酒吧；障碍 v.禁止；关</p>
<p>2、<strong>profession</strong>  n.（尤指需要专门知识或特殊训练的）职业，行业</p>
<p>3、<strong>professor</strong>  n.教授</p>
<p>4、<strong>professional</strong>  adj.职业的</p>
<p>5、<strong>justify</strong>  v.证明……正当（或有理、正确）；为…辩护</p>
<p>6、<strong>just</strong>  adj.公正的</p>
<p>7、<strong>justice</strong>  n.公正</p>
<p>8、<strong>justification</strong>  n.证明为正当；辩护</p>
<p>9、<strong>skeptical</strong>  adj.惯于（或倾向于）怀疑的，表示怀疑的</p>
<p>10、<strong>skepticism</strong>  n.怀疑论</p>
<p>11、<strong>doubtful</strong>  adj.令人生疑的；不明确的</p>
<p>12、<strong>dubious</strong>  adj.令人怀疑的</p>
<p>13、<strong>suspicious</strong>  adj.怀疑的；疑心的</p>
<p>14、<strong>instinct</strong>  n.本能；直觉；天性</p>
<p>15、<strong>by instinct</strong>  本能的</p>
<p>16、<strong>competent</strong>  adj.有能力的，能胜任的</p>
<p>17、<strong>hostility</strong>  n.敌视；敌对；（对思想、计划等的）反对</p>
<p>18、<strong>hostile</strong>  adj.怀有敌意的；反对的；不友善的</p>
<p>19、<strong>be hostile to</strong>  反对…</p>
<p>20、<strong>hospitable</strong>  adj.热情友好的</p>
<p>21、<strong>scrape</strong>  v.刮；擦；艰难取得</p>
<h3 id="Unit19"><a href="#Unit19" class="headerlink" title="Unit19"></a>Unit19</h3><p>1、<strong>institute</strong>  n.学会，协会；研究院；（大专）学校，学院 v.建立；设立，组织</p>
<p>2、<strong>faculty</strong>  n.（大学的）院，系；（高等院校）全体教学人员</p>
<p>3、<strong>corporation</strong>  n.公司；社团；法人代表</p>
<p>4、<strong>corporate</strong>  adj.团体的；公司的；法人的；共同的，全体的</p>
<p>5、<strong>enterprise</strong>  n.企业，公司</p>
<p>6、<strong>commission</strong>  n.委员会；委任状；授权，委托，佣金，回扣 v.委任，委托</p>
<p>7、<strong>committee</strong>  n.委员会</p>
<h3 id="Unit20"><a href="#Unit20" class="headerlink" title="Unit20"></a>Unit20</h3><p>1、<strong>administer</strong>  v.施行，实施；掌管</p>
<p>2、<strong>administrative</strong>  adj. 管理的；行政的</p>
<p>3、<strong>administration</strong>  n.经营；管理；行政；行政机关，管理部门</p>
<p>4、<strong>federal</strong>  adj.联邦（制）的</p>
<p>5、<strong>federation</strong>  n.同盟，联邦</p>
<p>6、<strong>joint</strong>  adj.联合的，共同的  n.接合处；接头；接缝</p>
<p>7、<strong>congress</strong>  n.议会，国会；立法机关</p>
<p>8、<strong>upset</strong>  v.推翻；打乱  adj.难过的，伤心的；失望的  n.（身体、肠胃等）不适；心烦意乱</p>
<p>9、<strong>democracy</strong>  n.民主；民主主义</p>
<p>10、<strong>democratic</strong>  adj.民主的；民主主义</p>
<p>11、<strong>principle</strong>  n.原理；原则</p>
<p>12、<strong>principal</strong>  adj.最重要的，首要的</p>
<p>13、<strong>overturn</strong>  v.打翻；倾覆；推翻  n.翻转，倾覆，打翻；废除</p>
]]></content>
      <categories>
        <category>英语</category>
      </categories>
      <tags>
        <tag>千词百练</tag>
      </tags>
  </entry>
  <entry>
    <title>大三上学期期末Cisco配置实验</title>
    <url>/2022/01/07/%E5%A4%A7%E4%B8%89%E4%B8%8A%E5%AD%A6%E6%9C%9F%E6%9C%9F%E6%9C%ABCisco%E9%85%8D%E7%BD%AE%E5%AE%9E%E9%AA%8C/</url>
    <content><![CDATA[<p>写在最前：期末复习实验，<strong>仅供参考</strong>。<strong>实验文件（pka）以及配置文件（TXT）地址：</strong><a href="https://github.com/Zone-Too/Cisco_Finalexam_D3.1">Zone-Too/Cisco_Finalexam_D3.1 (github.com)</a></p>
<span id="more"></span>

<h4 id="一、使用工具"><a href="#一、使用工具" class="headerlink" title="一、使用工具"></a>一、使用工具</h4><p><strong>Cisco Packet Tracer  8.1.0</strong></p>
<h4 id="二、题目"><a href="#二、题目" class="headerlink" title="二、题目"></a>二、题目</h4><p><img src="pkaimage.png"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">一、设备规划</span><br><span class="line">中心校区：</span><br><span class="line">1.设备hostname与图上设备名称一致</span><br><span class="line">2.设备使能口令使用加密级别5的秘钥：UJN1948</span><br><span class="line">3.控制台口令：Console1948</span><br><span class="line">4.远程telnet，0 4线程，口令：Telnet1948</span><br><span class="line">5.全局加密明文口令</span><br><span class="line">二、地址规划</span><br><span class="line">1.中心校区：</span><br><span class="line">全网使用10.0.0.0/8进行划分;</span><br><span class="line">IPv6使用2001:db8: acad: :/48进行划分;</span><br><span class="line">路由器“Zhongxin”做IPv4与IPv6自动分配设备，子接口编号与Vlan号一致，地址池命名与Vlan一致。</span><br><span class="line">例如vlan11，地址池命名：VLAN11 </span><br><span class="line"></span><br><span class="line">1J：有线网络使用vlan11，无线网络使用vlan111</span><br><span class="line">第一教学楼有12层：</span><br><span class="line">IPv4使用10.1.0.0/16划分，要求每个楼层1个子网，此处PC-1J使用第12层IP地址（第12个子网IP段），网关选用该网段最后一个可用地址</span><br><span class="line">IPv6在有线网中使用2001:db8:acad:2::/64，网关选用该网段第一个可用地址，该楼使用SLACC方式分配IPv6地址</span><br><span class="line">无线网络采用FAT-AP部署，SSID：Wlan-1J，使用WAP2-PSK验证方式，AES加密方式，秘钥为：Wlan-1J-UJN。使用10.200.0.0/16划分，每网段满足1200个终端与用户，本楼使用第1个网段，网关选用该网段最后一个可用地址</span><br><span class="line"></span><br><span class="line">12J：有线网络使用vlan12，无线网络使用vlan121</span><br><span class="line">第十二教学楼有9层</span><br><span class="line">IPv4使用10.12.0.0/16划分，但因为有机房，要求每网段要满足410台PC规模，此处PC-12J，使用第37个子网网段，网关选用该网段最后一个可用地址</span><br><span class="line">IPv6在有线网中使用2001:db8: acad:2:12: :/64，网关选用该网段第一个可用地址，该楼使用SLACC DHCPv6方式分配IPv6地址</span><br><span class="line">无线网络采用FAT-AP部署，SSID：Wlan-12J，使用WAP2-PSK验证方式，AES加密方式，秘钥为：Wlan-12J-UJN。使用10.200.0.0/16划分，每网段满足1200个终端与用户，本楼使用第12个网段，网关选用该网段最后一个可用地址</span><br><span class="line"></span><br><span class="line">Office：有线网络使用vlan13，无线网络使用vlan131</span><br><span class="line">办公楼有12层</span><br><span class="line">IPv4使用10.100.0.0/16划分，要求每楼层1个子网，此处PC-Office是第4层，满足每层125台主机需求，使用第20个子网IP段，网关选用该网段最后一个可用地址</span><br><span class="line">IPv6在有线网中使用2001:db8: acad:100: :/64，网关选用该网段第一个可用地址，该楼使用DHCPv6方式分配地址</span><br><span class="line">无线网络采用FAT-AP部署，SSID：Wlan-Office，使用WAP2-PSK验证方式，AES加密方式，秘钥为：Wlan-Office-UJN。使用10.200.0.0/16划分，每网段满足1200个终端与用户，本楼使用第31个网段，网关选用该网段最后一个可用地址</span><br><span class="line"></span><br><span class="line">2.舜耕校区</span><br><span class="line">文史楼，172.30.0.0/16进行划分，产生至少15个网络，网关为网段内最后一个可用地址,子接口编号与vlan号一致</span><br><span class="line">PC地址由R2-Center-East动态分配，WenShiLou-1F-PC地址池名称：WenShiLou-1F，vlan10；划分后第3段，</span><br><span class="line">PC地址由R2-Center-East动态分配，WenShiLou-2F-PC地址池名称：WenShiLou-2F，vlan20；划分后第7段，</span><br><span class="line">PC地址由R2-Center-East动态分配，WenShiLou-3F-PC地址池名称：WenShiLou-3F，vlan30；划分后第11段，</span><br><span class="line">PC地址由R2-Center-East动态分配，WenShiLou-4F-PC地址池名称：WenShiLou-4F，vlan40；划分后第15段，</span><br><span class="line">舜耕校区图书馆，172.31.0.0/16进行划分，产生至少1000个网络，网关为网段内最后一个可用地址,子接口编号与vlan号一致</span><br><span class="line">PC地址由R2-Center-East动态分配，TuShuGuan-1F-PC地址池名称：TuShuGuan-1F，vlan110；划分后第3段，</span><br><span class="line">PC地址由R2-Center-East动态分配，TuShuGuan-2F-PC地址池名称：TuShuGuan-2F，vlan120；划分后第10段，</span><br><span class="line">PC地址由R2-Center-East动态分配，TuShuGuan-3F-PC地址池名称：TuShuGuan-3F，vlan130；划分后第15段，</span><br><span class="line">PC地址由R2-Center-East动态分配，TuShuGuan-4F-PC地址池名称：TuShuGuan-4F，vlan140；划分后第29段，</span><br><span class="line"></span><br><span class="line">三、网络拓扑</span><br><span class="line">Core01与Core02分别是位于校内的两个核心机房，由于没有UPS等应急供电设施，为了各楼宇能够安全可靠接入，楼宇分别双上连至Core01与Core02，Core01与Core02同处于校内核心机房的Core03做环形架构，如图，Core01、Core02、Core03之间使用以太网通道技术的LACP协议，均使用active协商模式，Core01与Core02使用组号1，Core02与Core03使用组号2，Core01与Core03使用组号3</span><br><span class="line">考虑到日常线路和设备的冗余，使用PVST生成树技术，Core01作为vlan11,vlan12,vlan13的“主”根桥，作为vlan111,vlan121,vlan131的“次”根桥，Core02作为vlan111,vlan121,vlan131的“主”根桥，作为vlan11,vlan12,vlan13的“次”根桥。</span><br><span class="line"></span><br><span class="line">四、互联、互通及访问：</span><br><span class="line">主校区与舜耕校区使用静态路由互联，所有终端能够互通，主校区“Zhongxin”路由器使用192.168.100.1/30,舜耕校区“R2-Center-East”路由器使用192.168.100.2/30</span><br><span class="line">DNS服务器地址：202.194.64.1，2001:db8:acad:FFFF::1/64</span><br><span class="line">HTTP域名：www.sina.com.cn能够被访问，打开网页即可看到舜耕校区设备密码。（提示：核心机房服务器网路尚存在问题，需先排除故障）</span><br></pre></td></tr></table></figure>

<h4 id="三、详解子网划分"><a href="#三、详解子网划分" class="headerlink" title="三、详解子网划分"></a>三、详解子网划分</h4><p>一般拿到一个题目，第一件事情就是作子网划分，这里详细解析以下子网划分的过程</p>
<h5 id="1、主校区"><a href="#1、主校区" class="headerlink" title="1、主校区"></a>1、主校区</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">有线部分：</span><br><span class="line">1、对1J：</span><br><span class="line">IPv4使用10.1.0.0/16划分：</span><br><span class="line">10.1.   1    2     3     4     5     6     7     8    .    1    2     3     4     5     6     7     8</span><br><span class="line">10.1.  128  192   224   240   248   252   254   255   .   128  192   224   240   248   252   254   255</span><br><span class="line">要满足12个子网，因为2的4次方大于12，则要从左向右留4位。</span><br><span class="line">子网掩码：255.255.240.0</span><br><span class="line">IP地址：10.1.0.0/20</span><br><span class="line">网段跨度：255-240=15</span><br><span class="line">网络号跨度：256-240=16</span><br><span class="line">1J使用第12个子网IP段：网络号为（12-1）*16=176，网段为：10.1.176.0--10.1.191.255</span><br><span class="line">该段的网关是10.1.191.254</span><br><span class="line"></span><br><span class="line">2、对12J：</span><br><span class="line">IPV4使用10.12.0.0/16划分：</span><br><span class="line">10.12.   1    2     3     4     5     6     7     8    .    1    2     3     4     5     6     7     8</span><br><span class="line">10.12.  128  192   224   240   248   252   254   255   .   128  192   224   240   248   252   254   255</span><br><span class="line">要求每网段要满足410台PC规模，因为2的9次方大于410，则要从右向左留9位。</span><br><span class="line">子网掩码：255.255.254.0</span><br><span class="line">IP地址：10.12.0.0/23</span><br><span class="line">网段跨度：255-254=1</span><br><span class="line">网络号跨度：256-254=2</span><br><span class="line">12J使用第37个子网IP段：网络号为（37-1）*2=72，网段为：10.12.72.0--10.12.73.255</span><br><span class="line">该段的网关是10.12.73.254</span><br><span class="line"></span><br><span class="line">3、对Office：</span><br><span class="line">IPV4使用10.100.0.0/16划分：</span><br><span class="line">10.100.   1    2     3     4     5     6     7     8    .    1    2     3     4     5     6     7     8</span><br><span class="line">10.100.  128  192   224   240   248   252   254   255   .   128  192   224   240   248   252   254   255</span><br><span class="line">满足125台主机需求，2的7次方大于128，则从右往左留8位。</span><br><span class="line">子网掩码：255.255.255.128</span><br><span class="line">IP地址：10.100.0.0/25</span><br><span class="line">网段跨度：255-128=127</span><br><span class="line">网络号跨度：256-128=128</span><br><span class="line">Office使用第20个子网IP段：网络号为（20-1）*128=2432（2432/256=9.5），网段为：10.100.9.128--10.100.9.255</span><br><span class="line">该段的网关是10.100.9.254</span><br><span class="line"></span><br><span class="line">无线部分：</span><br><span class="line">1、对1J：</span><br><span class="line">10.200.    1   2     3     4     5     6     7     8    .    1    2     3     4     5     6     7     8</span><br><span class="line">10.200.  128  192   224   240   248   252   254   255   .   128  192   224   240   248   252   254   255</span><br><span class="line">满足1200个终端与用户（主机），2的11次方大于1200，则从右向左留11位。</span><br><span class="line">子网掩码：255.255.248.0</span><br><span class="line">IP地址：10.200.0.0/21</span><br><span class="line">网段跨度：255-248=7</span><br><span class="line">网络号跨度：256-248=8</span><br><span class="line">本楼使用第1个网段，网段为：10.200.0.0--10.200.7.255</span><br><span class="line">该段的网关是10.200.7.254</span><br><span class="line"></span><br><span class="line">2、对12J：</span><br><span class="line">10.200.    1   2     3     4     5     6     7     8    .    1    2     3     4     5     6     7     8</span><br><span class="line">10.200.  128  192   224   240   248   252   254   255   .   128  192   224   240   248   252   254   255</span><br><span class="line">子网掩码：255.255.248.0</span><br><span class="line">本楼使用第12个网段,网络号为：（12-1）*8=88，网段为：10.200.88.0--10.200.95.255</span><br><span class="line">该段的网关是10.200.95.254</span><br><span class="line"></span><br><span class="line">3、对Office：</span><br><span class="line">10.200.    1   2     3     4     5     6     7     8    .    1    2     3     4     5     6     7     8</span><br><span class="line">10.200.  128  192   224   240   248   252   254   255   .   128  192   224   240   248   252   254   255</span><br><span class="line">子网掩码：255.255.248.0</span><br><span class="line">本楼使用第12个网段,网络号为：（31-1）*8=240，网段为：10.200.240.0--10.200.247.255</span><br><span class="line">该段的网关是10.200.247.254</span><br></pre></td></tr></table></figure>

<h5 id="2、舜耕校区"><a href="#2、舜耕校区" class="headerlink" title="2、舜耕校区"></a>2、舜耕校区</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1、文史楼：</span><br><span class="line">172.30.0.0/16</span><br><span class="line">172.30.   1    2     3     4     5     6     7     8    .    1    2     3     4     5     6     7     8</span><br><span class="line">172.30.  128  192   224   240   248   252   254   255   .   128  192   224   240   248   252   254   255</span><br><span class="line">产生至少15个网络，2的4次方大于15，从左向右取4位</span><br><span class="line">子网掩码：255.255.240.0</span><br><span class="line">网段跨度：255-240=15</span><br><span class="line">网络号跨度：256-240=16</span><br><span class="line">1F：网络号为（3-1）*16=32，网段：172.30.32.0-172.30.47.255，网关：172.30.47.254</span><br><span class="line">2F：网络号为（7-1）*16=96，网段：172.30.96.0-172.30.111.255，网关：172.30.111.254</span><br><span class="line">3F：网络号为（11-1）*16=160，网段：172.30.160.0-172.30.175.255，网关：172.30.175.254</span><br><span class="line">4F：网络号为（15-1）*16=224，网段：172.30.224.0-172.30.239.255，网关：172.30.239.254</span><br><span class="line"></span><br><span class="line">2、图书馆：</span><br><span class="line">172.31.0.0/16</span><br><span class="line">172.31.    1   2     3     4     5     6     7     8    .    1    2     3     4     5     6     7     8</span><br><span class="line">172.31.  128  192   224   240   248   252   254   255   .   128  192   224   240   248   252   254   255</span><br><span class="line">产生至少1000个网络，2的10次方大于1000，从左向右取10位</span><br><span class="line">子网掩码：255.255.255.192</span><br><span class="line">网段跨度：255-192=63</span><br><span class="line">网络号跨度：256-192=64</span><br><span class="line">1F：网络号为（3-1）*64=128，网段：172.31.0.128-172.31.0.191，网关：172.31.0.190</span><br><span class="line">2F：网络号为（10-1）*64=576，网段：172.31.2.64-172.31.2.127，网关：172.31.2.126</span><br><span class="line">3F：网络号为（15-1）*64=896，网段：172.31.3.128-172.31.3.191，网关：172.31.3.190</span><br><span class="line">4F：网络号为（29-1）*64=1792，网段：172.31.7.0-172.31.7.63，网关：172.31.7.62</span><br></pre></td></tr></table></figure>

<h4 id="四、配置"><a href="#四、配置" class="headerlink" title="四、配置"></a>四、配置</h4><p>在配置单独机器时，我省去了配置机器密码的环节，这样防止在配置过程中出现需要设备密码情况。</p>
<h5 id="1、在三台二层交换机上配置vlan"><a href="#1、在三台二层交换机上配置vlan" class="headerlink" title="1、在三台二层交换机上配置vlan"></a>1、在三台二层交换机上配置vlan</h5><h5 id="①-对1J"><a href="#①-对1J" class="headerlink" title="① 对1J"></a>① 对1J</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">en</span><br><span class="line">conf t</span><br><span class="line">vlan 11</span><br><span class="line">vlan 111</span><br><span class="line">int f0/24</span><br><span class="line">sw mo acc</span><br><span class="line">sw acc vl 11</span><br><span class="line">int g0/1</span><br><span class="line">sw mo acc</span><br><span class="line">sw acc vl 111</span><br><span class="line">int f0/1</span><br><span class="line">sw mo tr</span><br><span class="line">sw tr all vl 11,111</span><br><span class="line">int f0/2</span><br><span class="line">sw mo tr</span><br><span class="line">sw tr all vl 11,111</span><br></pre></td></tr></table></figure>

<p>命令解析：首先根据题目要求创建vlan11，vlan111,并且有线部分（f0/24）走vlan11，无线部分（g0/1）走vlan111，再分别让他们从下游的两条线出去（f0/1、f0/2）。</p>
<p>当这条线上只有一条vlan时，选用access模式（f0/24、g0/1），当一条线上有多条vlan时，选用trunk模式（f0/1、f0/2）。</p>
<h5 id="②-对12（与1J配置大同小异）"><a href="#②-对12（与1J配置大同小异）" class="headerlink" title="② 对12（与1J配置大同小异）"></a>② 对12（与1J配置大同小异）</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">en</span><br><span class="line">conf t</span><br><span class="line">vlan 12</span><br><span class="line">vlan 121</span><br><span class="line">int f0/24</span><br><span class="line">sw mo acc</span><br><span class="line">sw acc vl 12</span><br><span class="line">int g0/1</span><br><span class="line">sw mo acc</span><br><span class="line">sw acc vl 121</span><br><span class="line">int f0/1</span><br><span class="line">sw mo tr</span><br><span class="line">sw tr all vl 12,121</span><br><span class="line">int f0/2</span><br><span class="line">sw mo tr</span><br><span class="line">sw tr all vl 12,121</span><br></pre></td></tr></table></figure>

<h5 id="③-对Office（与1J、12J配置大同异）"><a href="#③-对Office（与1J、12J配置大同异）" class="headerlink" title="③ 对Office（与1J、12J配置大同异）"></a>③ 对Office（与1J、12J配置大同异）</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">en</span><br><span class="line">conf t</span><br><span class="line">vlan 13</span><br><span class="line">vlan 131</span><br><span class="line">int f0/24</span><br><span class="line">sw mo acc</span><br><span class="line">sw acc vl 13</span><br><span class="line">int g0/1</span><br><span class="line">sw mo acc</span><br><span class="line">sw acc vl 131</span><br><span class="line">int f0/1</span><br><span class="line">sw mo tr</span><br><span class="line">sw tr all vl 13,131</span><br><span class="line">int f0/2</span><br><span class="line">sw mo tr</span><br><span class="line">sw tr all vl 13,131</span><br></pre></td></tr></table></figure>

<h5 id="2、在三台三层交换机上配置vlan"><a href="#2、在三台三层交换机上配置vlan" class="headerlink" title="2、在三台三层交换机上配置vlan"></a>2、在三台三层交换机上配置vlan</h5><h5 id="①-对Core01"><a href="#①-对Core01" class="headerlink" title="① 对Core01"></a>① 对Core01</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">en</span><br><span class="line">conf t</span><br><span class="line">vlan 11</span><br><span class="line">vlan 111</span><br><span class="line">vlan 12</span><br><span class="line">vlan 121</span><br><span class="line">vlan 13</span><br><span class="line">vlan 131</span><br><span class="line">int f0/1</span><br><span class="line">sw tr en do</span><br><span class="line">sw mo tr</span><br><span class="line">sw tr all vl 11,111</span><br><span class="line">int f0/11</span><br><span class="line">sw tr en do</span><br><span class="line">sw mo tr</span><br><span class="line">sw tr all vl 12,121</span><br><span class="line">int f0/21</span><br><span class="line">sw tr en do</span><br><span class="line">sw mo tr</span><br><span class="line">sw tr all vl 13,131</span><br></pre></td></tr></table></figure>

<p>命令解析：三层交换机上的trunk模式要先做封装 <em><strong>“  sw tr en do  ”</strong></em></p>
<h5 id="②-对Core02"><a href="#②-对Core02" class="headerlink" title="② 对Core02"></a>② 对Core02</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">en</span><br><span class="line">conf t</span><br><span class="line">vlan 11</span><br><span class="line">vlan 111</span><br><span class="line">vlan 12</span><br><span class="line">vlan 121</span><br><span class="line">vlan 13</span><br><span class="line">vlan 131</span><br><span class="line">int f0/2</span><br><span class="line">sw tr en do</span><br><span class="line">sw mo tr</span><br><span class="line">sw tr all vl 11,111</span><br><span class="line">int f0/12</span><br><span class="line">sw tr en do</span><br><span class="line">sw mo tr</span><br><span class="line">sw tr all vl 12,121</span><br><span class="line">int f0/22</span><br><span class="line">sw tr en do</span><br><span class="line">sw mo tr</span><br><span class="line">sw tr all vl 13,131</span><br></pre></td></tr></table></figure>

<h5 id="③-对Core03"><a href="#③-对Core03" class="headerlink" title="③ 对Core03"></a>③ 对Core03</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">en</span><br><span class="line">conf t</span><br><span class="line">vlan 11</span><br><span class="line">vlan 111</span><br><span class="line">vlan 12</span><br><span class="line">vlan 121</span><br><span class="line">vlan 13</span><br><span class="line">vlan 131</span><br></pre></td></tr></table></figure>

<h5 id="3、在三台三层交换机上配置LACP"><a href="#3、在三台三层交换机上配置LACP" class="headerlink" title="3、在三台三层交换机上配置LACP"></a>3、在三台三层交换机上配置LACP</h5><h5 id="①-对Core01-1"><a href="#①-对Core01-1" class="headerlink" title="① 对Core01"></a>① 对Core01</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">int range fa0/23 - 24</span><br><span class="line">channel-protocol lacp</span><br><span class="line">channel-group 1 mode active</span><br><span class="line">interface port-channel 1</span><br><span class="line">sw tr en do</span><br><span class="line">sw mo tr</span><br><span class="line">sw tr all vl 11,111,12,121,13,131</span><br><span class="line"></span><br><span class="line">int range fa0/12 - 13</span><br><span class="line">channel-protocol lacp</span><br><span class="line">channel-group 3 mode active</span><br><span class="line">interface port-channel 3</span><br><span class="line">sw tr en do</span><br><span class="line">sw mo tr</span><br><span class="line">sw tr all vl 11,111,12,121,13,131</span><br></pre></td></tr></table></figure>

<h5 id="②-对Core02-1"><a href="#②-对Core02-1" class="headerlink" title="② 对Core02"></a>② 对Core02</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">int range fa0/23 - 24</span><br><span class="line">channel-protocol lacp</span><br><span class="line">channel-group 1 mode active</span><br><span class="line">interface port-channel 1</span><br><span class="line">sw tr en do</span><br><span class="line">sw mo tr</span><br><span class="line">sw tr all vl 11,111,12,121,13,131</span><br><span class="line"></span><br><span class="line">int range fa0/14 - 15</span><br><span class="line">channel-protocol lacp</span><br><span class="line">channel-group 2 mode active</span><br><span class="line">interface port-channel 2</span><br><span class="line">sw tr en do</span><br><span class="line">sw mo tr</span><br><span class="line">sw tr all vl 11,111,12,121,13,131 </span><br></pre></td></tr></table></figure>

<h5 id="③-对Core03-1"><a href="#③-对Core03-1" class="headerlink" title="③ 对Core03"></a>③ 对Core03</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">int range fa0/14 - 15</span><br><span class="line">channel-protocol lacp</span><br><span class="line">channel-group 2 mode active</span><br><span class="line">interface port-channel 2</span><br><span class="line">sw tr en do</span><br><span class="line">sw mo tr</span><br><span class="line">sw tr all vl 11,111,12,121,13,131</span><br><span class="line"></span><br><span class="line">int range fa0/12 - 13</span><br><span class="line">channel-protocol lacp</span><br><span class="line">channel-group 3 mode active</span><br><span class="line">interface port-channel 3</span><br><span class="line">sw tr en do</span><br><span class="line">sw mo tr</span><br><span class="line">sw tr all vl 11,111,12,121,13,131</span><br></pre></td></tr></table></figure>

<h5 id="4、在Core01和Core02上配置PVST"><a href="#4、在Core01和Core02上配置PVST" class="headerlink" title="4、在Core01和Core02上配置PVST"></a>4、在Core01和Core02上配置PVST</h5><h5 id="①-对Core01-2"><a href="#①-对Core01-2" class="headerlink" title="① 对Core01"></a>① 对Core01</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">spanning-tree mode pvst</span><br><span class="line">spanning-tree vlan 11,12,13 root primary</span><br><span class="line">spanning-tree vlan 111,121,131 root secondary</span><br></pre></td></tr></table></figure>

<h5 id="②-对Core02-2"><a href="#②-对Core02-2" class="headerlink" title="② 对Core02"></a>② 对Core02</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">spanning-tree mode pvst</span><br><span class="line">spanning-tree vlan 111,121,131 root primary</span><br><span class="line">spanning-tree vlan 11,12,13 root secondary</span><br></pre></td></tr></table></figure>

<h5 id="5、在Core03上把所有vlan放行"><a href="#5、在Core03上把所有vlan放行" class="headerlink" title="5、在Core03上把所有vlan放行"></a>5、在Core03上把所有vlan放行</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">int f0/1</span><br><span class="line">sw tr en do</span><br><span class="line">sw mo tr</span><br><span class="line">sw tr all vl 11,111,12,121,13,131</span><br></pre></td></tr></table></figure>

<h5 id="6、路由器ZhongXin上的配置"><a href="#6、路由器ZhongXin上的配置" class="headerlink" title="6、路由器ZhongXin上的配置"></a>6、路由器ZhongXin上的配置</h5><h5 id="①-配置子接口"><a href="#①-配置子接口" class="headerlink" title="① 配置子接口"></a>① 配置子接口</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">en</span><br><span class="line">conf t</span><br><span class="line">int f0/0.11</span><br><span class="line">en do 11</span><br><span class="line">ip add 10.1.191.254 255.255.240.0</span><br><span class="line">int f0/0.111</span><br><span class="line">en do 111</span><br><span class="line">ip add 10.200.7.254 255.255.248.0</span><br><span class="line">int f0/0.12</span><br><span class="line">en do 12</span><br><span class="line">ip add 10.12.73.254 255.255.254.0</span><br><span class="line">int f0/0.121</span><br><span class="line">en do 121</span><br><span class="line">ip add 10.200.95.254 255.255.248.0</span><br><span class="line">int f0/0.13</span><br><span class="line">en do 13</span><br><span class="line">ip add 10.100.9.254 255.255.255.128</span><br><span class="line">int f0/0.131</span><br><span class="line">en do 131</span><br><span class="line">ip add 10.200.247.254 255.255.248.0</span><br><span class="line">int f0/0</span><br><span class="line">no shut</span><br></pre></td></tr></table></figure>

<h5 id="②-配置-IPV4-DHCP"><a href="#②-配置-IPV4-DHCP" class="headerlink" title="② 配置 IPV4 DHCP"></a>② 配置 IPV4 DHCP</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ip dhcp pool VLAN11</span><br><span class="line">network 10.1.176.0 255.255.240.0</span><br><span class="line">dns-server 202.194.64.1</span><br><span class="line">default-router 10.1.191.254</span><br><span class="line"></span><br><span class="line">ip dhcp pool VLAN111</span><br><span class="line">network 10.200.0.0 255.255.248.0</span><br><span class="line">dns-server 202.194.64.1</span><br><span class="line">default-router 10.200.7.254</span><br><span class="line"></span><br><span class="line">ip dhcp pool VLAN12</span><br><span class="line">network 10.12.72.0 255.255.254.0</span><br><span class="line">dns-server 202.194.64.1</span><br><span class="line">default-router 10.12.73.254</span><br><span class="line"></span><br><span class="line">ip dhcp pool VLAN121</span><br><span class="line">network 10.200.88.0 255.255.248.0</span><br><span class="line">dns-server 202.194.64.1</span><br><span class="line">default-router 10.200.95.254</span><br><span class="line"></span><br><span class="line">ip dhcp pool VLAN13</span><br><span class="line">network 10.100.9.128 255.255.255.128</span><br><span class="line">dns-server 202.194.64.1</span><br><span class="line">default-router 10.100.9.254</span><br><span class="line"></span><br><span class="line">ip dhcp pool VLAN131</span><br><span class="line">network 10.200.240.0 255.255.248.0</span><br><span class="line">dns-server 202.194.64.1</span><br><span class="line">default-router 10.200.247.254</span><br></pre></td></tr></table></figure>

<h5 id="③-配置IPV6自动分配"><a href="#③-配置IPV6自动分配" class="headerlink" title="③ 配置IPV6自动分配"></a>③ 配置IPV6自动分配</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ipv6 unicast-routing </span><br><span class="line">ipv6 dhcp pool VLAN12</span><br><span class="line">dns-server 2001:db8:acad:FFFF::1</span><br><span class="line">ipv6 dhcp pool VLAN13</span><br><span class="line">address prefix 2001:db8:acad:100::/64</span><br><span class="line">dns-server 2001:db8:acad:FFFF::1</span><br><span class="line"></span><br><span class="line">int f0/0.11</span><br><span class="line">ipv6 enable</span><br><span class="line">ipv6 address 2001:db8:acad:2::1/64</span><br><span class="line"></span><br><span class="line">int f0/0.12</span><br><span class="line">ipv6 enable</span><br><span class="line">ipv6 address 2001:db8:acad:12::1/64</span><br><span class="line">ipv6 nd other-config-flag</span><br><span class="line">ipv6 dhcp server VLAN12</span><br><span class="line"></span><br><span class="line">int f0/0.13</span><br><span class="line">ipv6 enable</span><br><span class="line">ipv6 address 2001:db8:acad:100::1/64</span><br><span class="line">ipv6 nd other-config-flag</span><br><span class="line">ipv6 nd managed-config-flag</span><br><span class="line">ipv6 dhcp server VLAN13</span><br></pre></td></tr></table></figure>

<p>命令解析：注意根据题意区分<strong>SLACC、SLACC DHCPv6</strong>和<strong>DHCPv6</strong>三种IPV6分配方式的不同。</p>
<h5 id="④-配置互联"><a href="#④-配置互联" class="headerlink" title="④ 配置互联"></a>④ 配置互联</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">int s0/3/0</span><br><span class="line">ip add 192.168.100.1 255.255.255.252</span><br><span class="line">no shut</span><br></pre></td></tr></table></figure>

<h5 id="⑤-配置静态路由"><a href="#⑤-配置静态路由" class="headerlink" title="⑤ 配置静态路由"></a>⑤ 配置静态路由</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ip route 172.30.32.0 255.255.240.0 192.168.100.2</span><br><span class="line">ip route 172.30.96.0 255.255.240.0 192.168.100.2</span><br><span class="line">ip route 172.30.160.0 255.255.240.0 192.168.100.2</span><br><span class="line">ip route 172.30.224.0 255.255.240.0 192.168.100.2</span><br><span class="line">ip route 172.31.0.128 255.255.255.192 192.168.100.2</span><br><span class="line">ip route 172.31.2.64 255.255.255.192 192.168.100.2</span><br><span class="line">ip route 172.31.3.128 255.255.255.192 192.168.100.2</span><br><span class="line">ip route 172.31.7.0 255.255.255.192 192.168.100.2</span><br></pre></td></tr></table></figure>

<p>命令解析：</p>
<p>① 静态路由的写法是<em><strong>ip route network mask {address or interface}</strong></em></p>
<p>network:目的网络地址</p>
<p>mask：子网掩码</p>
<p>address：到达目的网络经过的下一跳路由器的接口地址</p>
<p>interface：到达目的网络的本地接口</p>
<p>② 默认路由配置命令<em><strong>Ip route 0.0.0.0 0.0.0.0 address</strong></em></p>
<p>0.0.0.0 0.0.0.0：表示任何网络</p>
<h5 id="7、-中心校区排除故障"><a href="#7、-中心校区排除故障" class="headerlink" title="7、 中心校区排除故障"></a>7、 中心校区排除故障</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sw mo acc</span><br><span class="line">sw acc vl 10</span><br><span class="line">int f0/12</span><br><span class="line">sw mo acc</span><br><span class="line">sw acc vl 20</span><br><span class="line"></span><br><span class="line">vl 10</span><br><span class="line">vl 20</span><br><span class="line">int f0/24</span><br><span class="line">sw tr en do</span><br><span class="line">sw mo tr </span><br><span class="line">sw tr all vl 10,20</span><br></pre></td></tr></table></figure>

<p>命令解析：题目最后一句话：“ 提示：核心机房服务器网路尚存在问题，需先排除故障 ”。</p>
<p>首先，在ZhongXin上使用<em><strong>show running-config</strong></em>查看配置情况，发现有这样两条信息：</p>
<p><img src="errorimage.png"></p>
<p>再根据，题目里的另一句话：“ 子接口编号与Vlan号一致 ”，则说明一定有vlan10和vlan20在ZhongXin路由器上，再查看DNS服务器和HTTP服务器的IP地址分辨出vlan10在DNS服务器那一边，vlan20在HTTP服务器那一边，遂进行以上配置。</p>
<p><em><strong>至此中心校区这边就配置完毕了</strong></em>（注意机器的密码啥的没有配置，会在后面说）</p>
<h5 id="8、配置舜耕校区的二层交换机"><a href="#8、配置舜耕校区的二层交换机" class="headerlink" title="8、配置舜耕校区的二层交换机"></a>8、配置舜耕校区的二层交换机</h5><h5 id="①-SW-WenShiLou-1F-2F"><a href="#①-SW-WenShiLou-1F-2F" class="headerlink" title="① SW-WenShiLou-1F-2F"></a>① SW-WenShiLou-1F-2F</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">en</span><br><span class="line">conf t</span><br><span class="line">hostname SW-WenShiLou-1F-2F</span><br><span class="line">vlan 10</span><br><span class="line">vlan 20</span><br><span class="line">int f0/3</span><br><span class="line">sw mo acc</span><br><span class="line">sw acc vl 10</span><br><span class="line">int f0/7</span><br><span class="line">sw mo acc</span><br><span class="line">sw acc vl 20</span><br><span class="line">int f0/1</span><br><span class="line">sw mo tr</span><br><span class="line">sw tr all vl 10,20</span><br></pre></td></tr></table></figure>

<h5 id="②-SW-WenShiLou-3F-4F"><a href="#②-SW-WenShiLou-3F-4F" class="headerlink" title="② SW-WenShiLou-3F-4F"></a>② SW-WenShiLou-3F-4F</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">en</span><br><span class="line">conf t</span><br><span class="line">hostname SW-WenShiLou-3F-4F</span><br><span class="line">vlan 30</span><br><span class="line">vlan 40</span><br><span class="line">int f0/7</span><br><span class="line">sw mo acc</span><br><span class="line">sw acc vl 30</span><br><span class="line">int f0/11</span><br><span class="line">sw mo acc</span><br><span class="line">sw acc vl 40</span><br><span class="line">int f0/3</span><br><span class="line">sw mo tr</span><br><span class="line">sw tr all vl 30,40</span><br></pre></td></tr></table></figure>

<h5 id="③-SW-TuShuGuan-1F-2F"><a href="#③-SW-TuShuGuan-1F-2F" class="headerlink" title="③ SW-TuShuGuan-1F-2F"></a>③ SW-TuShuGuan-1F-2F</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">en</span><br><span class="line">conf t</span><br><span class="line">hostname SW-TuShuGuan-1F-2F</span><br><span class="line">vlan 110</span><br><span class="line">vlan 120</span><br><span class="line">int f0/22</span><br><span class="line">sw mo acc</span><br><span class="line">sw acc vl 110</span><br><span class="line">int f0/17</span><br><span class="line">sw mo acc</span><br><span class="line">sw acc vl 120</span><br><span class="line">int f0/21</span><br><span class="line">sw mo tr</span><br><span class="line">sw tr all vl 110,120</span><br></pre></td></tr></table></figure>

<h5 id="④-SW-TuShuGuan-3F-4F"><a href="#④-SW-TuShuGuan-3F-4F" class="headerlink" title="④ SW-TuShuGuan-3F-4F"></a>④ SW-TuShuGuan-3F-4F</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">en</span><br><span class="line">conf t</span><br><span class="line">hostname SW-TuShuGuan-3F-4F</span><br><span class="line">vlan 130</span><br><span class="line">vlan 140</span><br><span class="line">int f0/15</span><br><span class="line">sw mo acc</span><br><span class="line">sw acc vl 130</span><br><span class="line">int f0/18</span><br><span class="line">sw mo acc</span><br><span class="line">sw acc vl 140</span><br><span class="line">int f0/12</span><br><span class="line">sw mo tr</span><br><span class="line">sw tr all vl 130,140</span><br></pre></td></tr></table></figure>

<h5 id="9、配置舜耕校区三层交换机"><a href="#9、配置舜耕校区三层交换机" class="headerlink" title="9、配置舜耕校区三层交换机"></a>9、配置舜耕校区三层交换机</h5><h5 id="①-对SW-WenShiLou"><a href="#①-对SW-WenShiLou" class="headerlink" title="① 对SW-WenShiLou"></a>① 对SW-WenShiLou</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">en</span><br><span class="line">conf t</span><br><span class="line">hostname SW-WenShiLou</span><br><span class="line">vlan 10</span><br><span class="line">vlan 20</span><br><span class="line">vlan 30</span><br><span class="line">vlan 40</span><br><span class="line">int f0/1</span><br><span class="line">sw tr en do</span><br><span class="line">sw mo tr</span><br><span class="line">sw tr all vl 10,20</span><br><span class="line">int f0/3</span><br><span class="line">sw tr en do</span><br><span class="line">sw mo tr</span><br><span class="line">sw tr all vl 30,40</span><br><span class="line">int  fa0/2</span><br><span class="line">sw tr en do</span><br><span class="line">sw mo tr</span><br><span class="line">sw tr all vl 10,20,30,40</span><br></pre></td></tr></table></figure>

<h5 id="②-对SW-TuShuGuan"><a href="#②-对SW-TuShuGuan" class="headerlink" title="② 对SW-TuShuGuan"></a>② 对SW-TuShuGuan</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">en</span><br><span class="line">conf t</span><br><span class="line">hostname SW-TuShuGuan</span><br><span class="line">vlan 110</span><br><span class="line">vlan 120</span><br><span class="line">vlan 130</span><br><span class="line">vlan 140</span><br><span class="line">int f0/7</span><br><span class="line">sw tr en do</span><br><span class="line">sw mo tr</span><br><span class="line">sw tr all vl 110,120</span><br><span class="line">int f0/18</span><br><span class="line">sw tr en do</span><br><span class="line">sw mo tr</span><br><span class="line">sw tr all vl 130,140</span><br><span class="line">int  fa0/23</span><br><span class="line">sw tr en do</span><br><span class="line">sw mo tr</span><br><span class="line">sw tr all vl 110,120,130,140</span><br></pre></td></tr></table></figure>

<h5 id="10、配置路由器R2-Center-East"><a href="#10、配置路由器R2-Center-East" class="headerlink" title="10、配置路由器R2-Center-East"></a>10、配置路由器R2-Center-East</h5><h5 id="①-配置子接口-1"><a href="#①-配置子接口-1" class="headerlink" title="① 配置子接口"></a>① 配置子接口</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">en</span><br><span class="line">conf t</span><br><span class="line">hostname R2-Center-East</span><br><span class="line">int g0/0.10</span><br><span class="line">en do 10</span><br><span class="line">ip add 172.30.47.254 255.255.240.0</span><br><span class="line">int g0/0.20</span><br><span class="line">en do 20</span><br><span class="line">ip add 172.30.111.254 255.255.240.0</span><br><span class="line">int g0/0.30</span><br><span class="line">en do 30</span><br><span class="line">ip add 172.30.175.254 255.255.240.0</span><br><span class="line">int g0/0.40</span><br><span class="line">en do 40</span><br><span class="line">ip add 172.30.239.254 255.255.240.0</span><br><span class="line">int g0/2.110</span><br><span class="line">en do 110</span><br><span class="line">ip add 172.31.0.190 255.255.255.192</span><br><span class="line">int g0/2.120</span><br><span class="line">en do 120</span><br><span class="line">ip add 172.31.2.126 255.255.255.192</span><br><span class="line">int g0/2.130</span><br><span class="line">en do 130</span><br><span class="line">ip add 172.31.3.190 255.255.255.192</span><br><span class="line">int g0/2.140</span><br><span class="line">en do 140</span><br><span class="line">ip add 172.31.7.62 255.255.255.192</span><br><span class="line"></span><br><span class="line">int g0/0</span><br><span class="line">no shut</span><br><span class="line">int g0/2</span><br><span class="line">no shut</span><br></pre></td></tr></table></figure>

<h5 id="②-配置IPV4-DHCP"><a href="#②-配置IPV4-DHCP" class="headerlink" title="② 配置IPV4 DHCP"></a>② 配置IPV4 DHCP</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ip dhcp pool VLAN10</span><br><span class="line">network 172.30.32.0 255.255.240.0</span><br><span class="line">dns-server 202.194.64.1</span><br><span class="line">default-router 172.30.47.254</span><br><span class="line">ip dhcp pool VLAN20</span><br><span class="line">network 172.30.96.0 255.255.240.0</span><br><span class="line">dns-server 202.194.64.1</span><br><span class="line">default-router 172.30.111.254</span><br><span class="line">ip dhcp pool VLAN30</span><br><span class="line">network 172.30.160.0 255.255.240.0</span><br><span class="line">dns-server 202.194.64.1</span><br><span class="line">default-router 172.30.175.254</span><br><span class="line">ip dhcp pool VLAN40</span><br><span class="line">network 172.30.224.0 255.255.240.0</span><br><span class="line">dns-server 202.194.64.1</span><br><span class="line">default-router 172.30.239.254</span><br><span class="line"></span><br><span class="line">ip dhcp pool VLAN110</span><br><span class="line">network 172.31.0.128 255.255.255.192</span><br><span class="line">dns-server 202.194.64.1</span><br><span class="line">default-router 172.31.0.190</span><br><span class="line">ip dhcp pool VLAN120</span><br><span class="line">network 172.31.2.64 255.255.255.192</span><br><span class="line">dns-server 202.194.64.1</span><br><span class="line">default-router 172.31.2.126</span><br><span class="line">ip dhcp pool VLAN130</span><br><span class="line">network 172.31.3.128 255.255.255.192</span><br><span class="line">dns-server 202.194.64.1</span><br><span class="line">default-router 172.31.3.190</span><br><span class="line">ip dhcp pool VLAN140</span><br><span class="line">network 172.31.7.0 255.255.255.192</span><br><span class="line">dns-server 202.194.64.1</span><br><span class="line">default-router 172.31.7.62</span><br></pre></td></tr></table></figure>

<h5 id="③-配置互联"><a href="#③-配置互联" class="headerlink" title="③ 配置互联"></a>③ 配置互联</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">int s0/3/0</span><br><span class="line">ip add 192.168.100.2 255.255.255.252</span><br><span class="line">no sh</span><br></pre></td></tr></table></figure>

<h5 id="④-配置静态路由（缺省路由）"><a href="#④-配置静态路由（缺省路由）" class="headerlink" title="④ 配置静态路由（缺省路由）"></a>④ 配置静态路由（缺省路由）</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ip route 0.0.0.0 0.0.0.0 192.168.100.1</span><br></pre></td></tr></table></figure>

<h5 id="11、密码配置"><a href="#11、密码配置" class="headerlink" title="11、密码配置"></a>11、密码配置</h5><p>密码的配置根据题意除了机器的命名，配置都是一样的，此处以SW-1J为例：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">en</span><br><span class="line">conf t</span><br><span class="line">hostname 1J</span><br><span class="line">enable secret UJN1948</span><br><span class="line">line console 0</span><br><span class="line">password Console1948</span><br><span class="line">login</span><br><span class="line">line vty 0 4</span><br><span class="line">password Telnet1948</span><br><span class="line">login</span><br><span class="line">service password-encryption </span><br></pre></td></tr></table></figure>

<h4 id="五、总结"><a href="#五、总结" class="headerlink" title="五、总结"></a>五、总结</h4><p>可能子网划分有算错的，不想再找错误了 ^_^ !</p>
]]></content>
      <categories>
        <category>Cisco</category>
      </categories>
      <tags>
        <tag>Cisco</tag>
      </tags>
  </entry>
</search>
